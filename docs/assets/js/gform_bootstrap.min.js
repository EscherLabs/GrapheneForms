var gform=function(e,t){"use strict";this.fieldMethods=_.reduce(gform.field,(e,t,i)=>(e[i]=t(this),e),{}),this.fieldAttr=(e,t,...i)=>t[e]||gform.types[t.type||"text"][e],this.call=(e,t,...i)=>{let n=(t=t||this)[e]||gform.types[t.type||"text"][e];return"function"==typeof n?n.call(t,t,...i):n},this.bind=(e,t,...i)=>(t[e]||gform.types[t.type||"text"][e]).bind(t,...i),this.updateActions=function(e){var t=e.am.instances.length,i=function(e,t,i){gform.toggleClass(i.querySelector(e),"hidden",t)};"auto"==e.array.duplicate.enable&&_.each(e.am.container.querySelectorAll(".gform_isArray"),i.bind(null,'[data-ref="'+e.am.id+'"] .gform-add',t>=(e.am.array.max||5))),"auto"==e.array.remove.enable&&_.each(e.am.container.querySelectorAll(".gform_isArray"),i.bind(null,'[data-ref="'+e.am.id+'"] .gform-minus',!(t>e.am.array.min))),"auto"==e.array.append.enable&&i.call(null,'[data-ref="'+e.array.ref+'"].gform-append',t>=(e.array.max||5),e.operator.container)};var i=_.merge({},e);this.methods=i.methods||{},this.eventBus=new gform.eventBus({owner:"form",item:"field",handlers:i.events||{}},this),this.on=this.eventBus.on,this.dispatch=this.eventBus.dispatch,this.trigger=function(e,t,i){"string"==typeof e&&(e=[e]);var n=_.extend([],e);"object"==typeof t&&"owner"in t&&t.owner instanceof gform&&_.each(e,function(e){if("-1"==e.indexOf(":")){n.unshift(e+":"+t.name),n.unshift(e+":"+t.path),n.unshift(e+":"+t.relative);for(var i=t;"parent"in i&&!1!==i.parent;)i=i.parent,n.push(e+":"+i.name),n.push(e+":"+i.path),n.push(e+":"+i.relative)}}.bind(this)),this.dispatch(_.uniq(n),t,i)}.bind(this),this.errors={},this.popin=function(){},this.on("reset",(function(e){e.form.set(e.form.options.data)})),this.on("clear",(function(e){e.form.set()})),"object"==typeof i.collections?this.collections=i.collections:this.collections=gform.collections,this.options={fields:[],legend:"",strict:!0,data:"search",columns:gform.columns,name:gform.getUID(),...this.options,...i},"function"==typeof this.options.onSet&&(i=this.options.onSet(i)),this.options.fields=(this.options.fields||[]).concat(this.options.actions),"string"==typeof this.options.data&&(void 0!==window.location[this.options.data]?this.options.data=window.location[this.options.data].substr(1).split("&").map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0]]=decodeURIComponent(t[1]),e}),{}):gform.ajax({path:(this.options.rootpath||"")+this.options.data,success:function(e){this.set(e)}.bind(this)})),this.options.sections&&_.each(_.filter(this.options.fields,{type:"fieldset"}),(function(e,t){return e.index=t,e.section=!0,e.id=e.id||gform.getUID(),e})),this.el=t||i.el,"string"==typeof this.el?(this.selector=this.el+"",this.el=document.querySelector(this.el)):"object"==typeof this.el?this.el:t="",this.trigger("initialize",this);var n=function(){void 0===this.el&&(this.options.renderer="modal",this.el=gform.create(gform.render(this.options.template||"modal_container",this.options)),this.on("close",(function(e){void 0===e.field&&e.form.modal("hide")})),this.el.querySelector(".close").addEventListener("click",function(e){this.trigger("cancel",this)}.bind(this)),document.addEventListener("keyup",function(e){"Escape"===e.key&&this.trigger("cancel",this)}.bind(this))),this.options.clear&&"modal"!=this.options.renderer&&(this.el.innerHTML=gform.render(this.options.sections+"_container",this.options)),this.container=this.el.querySelector("form")||this.el,this.rowManager=gform.rowManager(this),this.newadd=this.fieldMethods.cultivate.bind(null,{data:this.options.data}),this.items=_.map(this.options.fields,this.newadd),Object.defineProperty(this,"fields",{get:()=>_.reduce(this.items,(e,t)=>(t instanceof gform.arrayManager?e=e.concat(t.instances):e.push(t),e),[])}),this.reflow(),gform.each.call(this,gform.addConditions),gform.each.call(this,(function(e){e.owner.trigger("change",e)})),this.options.private||(void 0!==gform.instances[this.options.name]&&gform.instances[this.options.name]!==this&&gform.instances[this.options.name].destroy(),gform.instances[this.options.name]=this)};this.infoEl=gform.create(gform.render("_tooltip")),this.infoEl.querySelector(".info-close").addEventListener("click",function(e){this.el.removeChild(this.infoEl),this.popper.destroy(),this.popper=null}.bind(this)),this.popper=null,["toJSON","toString","reflow","find","filter"].map(e=>{this[e]=gform[e].bind(this)}),this.restore=n.bind(this),this.get=this.toJSON,this.set=function(e,t){return"function"==typeof this.options.onSet&&(t=this.options.onSet(t)),"string"==typeof e&&this.find(e).set(t),"object"==typeof e&&_.each(e,function(e,t){var i=this.find(t);if(void 0!==i&&i.fillable)if(i.array&&_.isArray(e)){var n=this.filter({array:{ref:i.array.ref}},1);n.length>1&&_.each(n.slice(1),(function(e){var t=_.findIndex(e.parent.fields,{id:e.id});e.parent.fields.splice(t,1)})),_.isArray(e)&&i.set(e[0]);var s={};s[i.name]=e,gform.inflate.call(this.owner||this,s,i,_.findIndex(i.parent.fields,{id:i.id}),i.parent.fields),this.updateActions(i),i.operator.reflow()}else void 0!==i&&i.set(e)}.bind(this)),null==e&&gform.each.call(this,(function(e){e.set("")})),this.trigger("set"),this}.bind(this),this.isActive=!1,this.destroy=function(){this.isActive=!1,this.trigger(["close","destroy"]),this.el.removeEventListener("click",this.listener),this.el.innerHTML="",delete gform.instances[this.options.name],this.trigger("destroyed"),delete this.eventBus},n.call(this);var s=this.el.querySelector("ul.tabs");return null!==s&&s.addEventListener("click",function(e){"LI"==e.target.nodeName&&(e.preventDefault(),gform.removeClass(this.el.querySelector("ul.tabs .active"),"active"),gform.removeClass(this.el.querySelector(".tab-pane.active"),"active"),gform.addClass(e.target,"active"),gform.addClass(this.el.querySelector(e.target.parentElement.attributes.href.value),"active"))}.bind(this)),this.options.autoFocus&&this.fields.length&&this.find({visible:!0})&&window.setTimeout(gform.types[this.find({visible:!0}).type].focus.bind(this.find({visible:!0})),0),this.listener=function(e){var t,i=e.target;if(e.target.classList.value.indexOf("gform-")<0&&e.target.parentElement.classList.value.indexOf("gform-")>=0&&(i=e.target.parentElement),void 0!==i.dataset.id&&void 0===(t=gform.findByID.call(this,i.dataset.id)))return console.error("Field not found with id:"+i.dataset.id),!1;if(i.classList.contains("gform-add")){e.stopPropagation(),e.preventDefault();var n=t.am.addField(null,t);1==n.array.duplicate.clone&&n.set(t.get()),t.am.reflow()}if(i.classList.contains("gform-minus")&&(e.stopPropagation(),e.preventDefault(),t.am.removeField(t)),i.classList.contains("gform-append")){e.stopPropagation(),e.preventDefault();var s=gform.filterItems.call(this,{id:i.dataset.ref});s.length&&(this.trigger("appended",s[0].addField()),s[0].reflow())}if(i.classList.contains("gform-info")&&(e.stopPropagation(),e.preventDefault(),t.infoEl)){var r=!0;null!==this.popper&&(r=this.popper.state.elements.reference!=i,this.el.removeChild(this.infoEl),this.popper.destroy(),this.popper=null),r&&(this.infoEl.querySelector(".tooltip-body").innerHTML=gform.render("_info",t),this.popper=Popper.createPopper(e.target,this.infoEl,{placement:"top-end",modifiers:[{name:"offset",options:{offset:[0,8]}}]}),this.el.appendChild(this.infoEl))}}.bind(this),this.el.addEventListener("click",this.listener),this.trigger("initialized",this),this.isActive=!0,this.reflow(),this};gform.types={input:{base:"input",defaults:{},resetValue:()=>"",row:function(){return"<div></div>"},array:{template:e=>{var t=document.createElement("span");return t.setAttribute("id","el_"+(e||this).id),gform.addClass(t,gform.columnClasses[(e||this).columns]),gform.addClass(t,gform.offsetClasses[(e||this).offset]),gform.toggleClass(t,"gform_isArray",!!(e||this).array),t.innerHTML=gform.m('\n              <fieldset data-id="{{id}}" class="col-xs-12">\n                {{#array}}{{#append.enable}}<button data-ref="{{refid}}" class="btn btn-success gform-append float-right">{{append.label}}{{^append.label}}Add{{/append.label}}</button>{{/append.enable}}{{/array}}\n                <legend>{{array.label}}</legend>\n                <div class="array_container"></div>\n                {{#array}}{{^append.enable}}<button data-ref="{{refid}}" class="create btn btn-success gform-append">{{append.label}}{{^append.label}}Click here to create first{{/append.label}}</button>{{/append.enable}}{{/array}}\n                </fieldset>',e||this),t},container:".array_container"},setup:function(){this.labelEl=this.el.querySelector("label"),gform.types[this.type].setLabel.call(this),this.infoEl=this.el.querySelector(".gform-info")},setLabel:function(){gform.toggleClass(this.labelEl,"required",this.required),!1!==this.label&&void 0!==this.labelEl&&null!==this.labelEl&&(this.labelEl.innerHTML=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this)+this.suffix)},create:function(){var e=document.createElement("span");return e.setAttribute("id","el_"+this.id),gform.addClass(e,gform.columnClasses[this.columns]),gform.addClass(e,gform.offsetClasses[this.offset]),gform.toggleClass(e,"gform_isArray",!!this.array),e.innerHTML=this.render(),e},render:function(){return gform.render(this.type,this).split('value=""').join('value="'+_.escape(this.value)+'"')},destroy:function(){this.el.removeEventListener("change",this.onchangeEvent),this.el.removeEventListener("input",this.onchangeEvent)},initialize:function(){this.onchangeEvent=function(e){if(this.value=this.get(),null!=this.el.querySelector(".count")){var t=(this.value+"").length;this.limit>1&&(t+="/"+this.limit),this.el.querySelector(".count").innerHTML=t}gform.types[this.type].setup.call(this),this.parent.trigger(["change"],this,{input:this.value}),e&&this.parent.trigger(["input"],this,{input:this.value})}.bind(this),this.input=this.input||!1,this.el.addEventListener("input",this.onchangeEvent.bind(null,!0)),this.el.addEventListener("change",this.onchangeEvent.bind(null,!1)),gform.types[this.type].setup.call(this)},update:function(e,t){var i=this.el;void 0===e||void 0===e.options&&void 0===e.max&&void 0===e.action||void 0===this.mapOptions||(delete this.mapOptions,this.item=_.defaults({},e,this.item),this.options=_.extend([],this.item.options),this.max=this.item.max,this.min=this.item.min,this.path=this.item.path,this.action=this.item.action),"object"==typeof e&&(_.extend(this,e),this.item=_.extend(this.item,e)),this.destroy(),this.el=gform.types[this.type].create.call(this),i.parentNode.replaceChild(this.el,i),gform.types[this.type].initialize.call(this),gform.types[this.type].show.call(this,this.visible),gform.types[this.type].edit.call(this,this.editable),t||this.parent.trigger(["change"],this)},get:function(){return"el"in this?this.el.querySelector('input[name="'+this.name+'"]').value:this.internalValue},set:function(e){"el"in this&&(this.el.querySelector('input[name="'+this.name+'"]').value=e)},toString:function(e,t){return t?this.value:"<dt>"+this.label+"</dt> <dd>"+(this.value||'<span class="text-muted">(empty)</span>')+"</dd><hr>"},display:function(){return void 0!==this.value&&""!==this.value?this.value:"(empty)"},satisfied:function(e){return e=e||this.value,_.isArray(e)?!!e.length:null!=e&&""!==e&&!("number"==typeof e&&isNaN(e))},edit:function(e){this.editable=e,this.el.querySelector('[name="'+this.name+'"]').disabled=!e},show:function(e){this.el.style.display=e?"block":"none"},find:function(){return this},focus:function(e){window.setTimeout(()=>{if(null!==this.el.querySelector('input[name="'+this.name+'"]')&&"function"==typeof this.el.querySelector('input[name="'+this.name+'"]').focus){this.el.querySelector('input[name="'+this.name+'"]').focus();var e=this.value;this.set("",!0),this.set(e)}},e||0)}},bool:{base:"bool",resetValue:function(){return this.options[0]||!1},setup:function(){this.labelEl=this.el.querySelector("label"),gform.types[this.type].setLabel.call(this),this.infoEl=this.el.querySelector(".gform-info")},display:function(){return(_.find(this.options,{value:this.value})||{label:""}).label||this.value},defaults:{options:[!1,!0],format:{value:function(e){return e.value}}},render:function(){return this.strict||0!=this.options[0]||1!=this.options[1]||(this.value=!!this.value),void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getoptions(),void 0===this.options[0].value&&(this.options[0].value=!1,this.options[0].selected=0==this.value),void 0===this.options[1].value&&(this.options[1].value=!0,this.options[1].selected=1==this.value),this.update()}.bind(this))),this.options=this.mapOptions.getoptions(),void 0===this.options[0].value&&(this.options[0].value=!1,this.options[0].selected=0==this.value),(void 0===this.options[1].value||""==this.options[0].value&&""==this.options[1].value)&&(this.options[1].value=!0,this.options[1].selected=1==this.value),gform.render(this.type,this)},setLabel:function(){var e=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this);this.required&&(e+=this.requiredText+this.suffix);var t=this.el.querySelector("label[for="+this.name+"]");null!==t&&(t.innerHTML=e)},initialize:function(){this.onchangeEvent=function(e){this.value=this.get(),(_.find(this.options,{selected:!0})||{selected:null}).selected=!1,(_.find(this.options,{value:this.value})||this.options[0]||{value:""}).selected=!0,gform.types[this.type].setup.call(this),this.parent.trigger(e?"change":"input",this,{input:this.value})}.bind(this),this.el.addEventListener("input",this.onchangeEvent.bind(null,!0)),this.el.addEventListener("change",this.onchangeEvent.bind(null,!1)),gform.types[this.type].setup.call(this)},set:function(e){"el"in this&&(this.el.querySelector('input[name="'+this.name+'"]').checked=e==this.options[1].value)},edit:function(e){this.editable=e,this.el.querySelector('[name="'+this.name+'"]').disabled=!e},show:function(e){this.el.style.display=e?"block":"none"},get:function(){return"el"in this?this.options[this.el.querySelector('input[name="'+this.name+'"]').checked?1:0].value:this.initialValue},satisfied:function(e){return(e=e||this.value)==this.options[1].value},toString:function(e,t){return t?this.value:"<dt>"+(this.label||this.name)+"</dt> <dd>"+(this.display||'<span class="text-muted">(empty)</span>')+"</dd><hr>"}},collection:{base:"collection",defaults:{format:{label:"{{{label}}}",value:function(e){return"undefined"!==e.value?e.value:(e.label||e.index).toLowerCase().split(" ").join("_")}}},resetValue:()=>this.multiple?[]:null,toString:function(e,t){return t?this.multiple?this.value.length?_.reduce(this.value,function(e,t){var i=_.find(this.list,{value:t});return void 0!==i&&e.push(i.label),e}.bind(this),[])+"<hr>":"":(_.find(this.list,{value:this.value})||{label:""}).label:this.multiple?this.value.length?_.reduce(this.value,function(e,t){var i=_.find(this.list,{value:t});return void 0!==i&&(e+="<dd>"+i.label+"</dd>"),e}.bind(this),"<dt>"+this.label+"</dt> ")+"<hr>":"<dt>"+this.label+'</dt> <dd><span class="text-muted">(no selection)</span></dd><hr>':"<dt>"+this.label+"</dt> <dd>"+((_.find(this.list,{value:this.value})||{label:""}).label||'<span class="text-muted">(no selection)</span>')+"</dd><hr>"},display:function(){return this.multiple?this.value.length?"<ul>"+_.reduce(this.value,function(e,t){var i=_.find(this.list,{value:t});return void 0!==i&&(e+="<li>"+i.label+"</li>"),e}.bind(this),"")+"</ul>":"(no selection)":(_.find(this.list,{value:this.value})||{label:""}).label||"(no selection)"},render:function(){return void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.mapOptions.waiting||(this.multiple?(_.isArray(this.value)||(this.value=[this.value]),_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):((_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0)),this.update()}.bind(this)),this.mapOptions.on("collection",(function(e){e.field.field.owner.trigger("collection",e.field.field)}))),this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.mapOptions.waiting||(this.multiple?(_.isArray(this.value)||(this.value=[this.value]),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):(void 0===_.find(this.list,{value:this.value})&&this.other&&(this.value="other"),this.other&&void 0===_.find(this.list,{value:"other"})&&this.options.push({label:"Other",value:"other"}),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0)),gform.render(this.type,this)},setup:function(){if(this.multiple&&"undefinded"!=typeof this.limit&&(this.get().length>=this.limit?(this.maxSelected=!0,_.each(this.el.querySelector("select").options,(function(e){e.disabled=!e.selected}))):this.maxSelected&&(this.maxSelected=!1,_.each(this.el.querySelector("select").options,(function(e){e.disabled=!1}))),null!=this.el.querySelector(".count"))){var e=this.get().length;this.limit>1&&(e+="/"+this.limit),this.el.querySelector(".count").innerHTML=e}this.labelEl=this.el.querySelector("label"),gform.types[this.type].setLabel.call(this),this.infoEl=this.el.querySelector(".gform-info")},initialize:function(){this.el.addEventListener("change",function(){if(this.value=this.get(),this.multiple?(_.isArray(this.value)||(this.value=[this.value]),_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):((_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0),null!=this.el.querySelector(".count")){var e=this.value.length;this.limit>1&&(e+="/"+this.limit),this.el.querySelector(".count").innerHTML=e}gform.types[this.type].setup.call(this),this.parent.trigger(["change","input"],this,{input:this.value})}.bind(this)),gform.types[this.type].set.call(this,this.value),gform.types[this.type].setup.call(this)},get:function(){if(!("el"in this))return this.internalValue;var e=this.el.querySelector("select").value;if(search=_.find(this.list,{i:parseInt(e,10)}),e="undefined"==typeof search?this.other?"other":null:search.value,this.multiple){var t=this;e=_.transform(this.el.querySelector("select").options,(function(e,i){if(i.selected){var n=_.find(t.list,{i:parseInt(i.value)});void 0!==n&&e.push(n.value)}}),[])}return e},set:function(e){if(this.multiple){if(_.isArray(e)||(e=[e]),"undefinded"!=typeof this.limit&&e.length>this.limit)return!0;"el"in this&&_.each(this.el.querySelector("select").options,function(t){var i=_.find(this.list,{i:parseInt(t.value)});t.selected=void 0!==i&&e.indexOf(i.value)>=0}.bind(this))}else{var t=_.find(this.list,{value:e});"el"in this&&(this.el.querySelector("select").value=void 0!==t?t.i:null)}"function"==typeof gform.types[this.type].setup&&"el"in this&&gform.types[this.type].setup.call(this)},focus:function(){var e=this.name;this.multiple&&(e+="[]"),this.el.querySelector('[name="'+e+'"]').focus()},edit:function(e){this.editable=e;var t=this.name;this.multiple&&(t+="[]"),void 0!==this.mapOptions&&this.mapOptions.waiting,this.el.querySelector('[name="'+t+'"]').disabled=!this.editable},show:function(e){this.el.style.display=e?"block":"none"}},section:{resetValue:()=>({}),base:"section",filter:function(e,t){return gform.filter.call(this,e,t)},setLabel:function(){var e=gform.renderString(this.item.label||this.label,this);this.required&&(e+=this.requiredText+this.suffix);var t=this.el.querySelector("fieldset#"+this.id+">legend,fieldset#"+this.id+">label");null!==t&&(t.innerHTML=e),this.label=e},create:function(){var e=gform.create(this.render());return gform.addClass(e,gform.columnClasses[this.columns]),gform.addClass(e,gform.offsetClasses[this.offset]),gform.toggleClass(e,"gform_isArray",!!this.array),e},initialize:function(){this.rowManager=gform.rowManager(this),this.initialValue=this.value,Object.defineProperty(this,"value",{get:function(){return this.get()},enumerable:!0}),gform.types[this.type].setLabel.call(this)},render:function(){return this.section?gform.render(this.owner.options.sections+"_fieldset",this):gform.render("_fieldset",this)},update:function(e,t){"object"==typeof e&&_.extend(this.item,e);var i=this.el;this.destroy(),this.el=gform.types[this.type].create.call(this),i.parentNode.replaceChild(this.el,i),gform.types[this.type].initialize.call(this),gform.types[this.type].show.call(this,this.visible),gform.types[this.type].edit.call(this,this.editable),this.container=this.el.querySelector("fieldset")||this.el||null,this.reflow(this),t||this.parent.trigger(["change"],this)},get:function(e){return void 0!==e?gform.toJSON.call(this,e):_.selectPath(gform.toJSON.call(this),this.map)},toString:function(e,t){return t?gform.toString.call(this,e,t):gform.m('<h4>{{#label}}{{{label}}}{{/label}}</h4><hr><dl style="margin-left:10px">{{{value}}}</dl>',{label:this.label,value:gform.toString.call(this,e)})},display:function(){return'<div class="list-group-item ">'+this.toString()+"</div>"},set:function(e){return null==e||""==e?(gform.each.call(this,(function(e){e.set("")})),this.update({},!0)):_.each(e,function(e,t){var i=this.find(t);if(i.array&&_.isArray(e)){var n=this.filter({array:{ref:i.array.ref}},1);n.length>1&&_.each(n.slice(1),(function(e){var t=_.findIndex(e.parent.fields,{id:e.id});e.parent.fields.splice(t,1)}));var s=function(e,t,i){gform.toggleClass(i.querySelector(e),"hidden",t)};_.isArray(e)&&i.set(e[0]);var r={};r[i.name]=e,gform.inflate.call(this.owner,r,i,_.findIndex(i.parent.fields,{id:i.id}),i.parent.fields);var l=this.filter({array:{ref:i.array.ref}},1).length;_.each(i.operator.container.querySelectorAll(".gform_isArray"),s.bind(null,'[data-ref="'+i.array.ref+'"] .gform-add',l>=(i.array.max||5))),_.each(i.operator.container.querySelectorAll(".gform_isArray"),s.bind(null,'[data-ref="'+i.array.ref+'"] .gform-minus',!(l>(i.array.min||1)))),i.operator.reflow()}else void 0!==i&&i.set(e)}.bind(this)),this.render(),!0},find:function(e){return gform.find.call(this,e)},reflow:function(e){gform.reflow.call(this,e)},focus:function(){void 0!==this.fields&&this.fields.length&&gform.types[this.fields[0].type].focus.call(this.fields[0])},satisfied:function(e){return null!=(e=e||this.get())&&""!==e&&!("object"==typeof e&&_.isEmpty(e))},trigger:function(e,t,i){"string"==typeof e&&(e=[e]);var n=_.extend([],e);_.each(e,function(e){"-1"==e.indexOf(":")&&n.unshift(e+":"+this.name)}.bind(this)),this.parent.trigger(_.uniq(n),t,i)},show:function(e){if(this.owner.options.sections&&this.section)return!0;this.el.style.display=e?"block":"none"}},button:{base:"button",resetValue:()=>"",setLabel:function(){var e=gform.renderString((this.format||{title:null}).title||this.item.title||this.item.label||this.label,this);this.required&&(e+=this.requiredText+this.suffix);var t=this.el;null!==t&&(t.innerHTML=e)},toString:function(){return""},defaults:{parse:!1,columns:2,target:".gform-footer",map:!1},create:function(){var e=gform.create(this.render());return e.setAttribute("id","el_"+this.id),e},initialize:function(){this.action=this.action||(this.label||"").toLowerCase().split(" ").join("_"),this.onclickEvent=function(){this.editable&&this.parent.trigger(this.action,this)}.bind(this),this.el.addEventListener("click",this.onclickEvent),gform.types[this.type].setLabel.call(this)},render:function(){return gform.render("button",this)},satisfied:function(e){return this.editable&&this.visible},update:function(e,t){"object"==typeof e&&_.extend(this,this.item,e);var i=this.el;this.destroy(),this.el=gform.types[this.type].create.call(this),i.parentNode.replaceChild(this.el,i),gform.types[this.type].initialize.call(this),gform.types[this.type].show.call(this,this.visible),gform.types[this.type].edit.call(this,this.editable)},destroy:function(){this.el.removeEventListener("click",this.onclickEvent)},get:function(e){return null},set:function(e){},edit:function(e){this.editable=e,this.el.disabled=!e,gform.toggleClass(this.el,"disabled",!e)},show:function(e){this.el.style.display=e?"block":"none"},focus:function(){this.el.focus()}}},gform.types.text=gform.types.password=gform.types.color=gform.types.input,gform.types.number=_.extend({},gform.types.input,{get:function(){return"el"in this?parseFloat(this.el.querySelector('input[name="'+this.name+'"]').value,10):this.internalValue},render:function(){return gform.render(this.type,this).split('value=""').join('value="'+this.value+'"')}}),gform.types.hidden=_.extend({},gform.types.input,{defaults:{columns:!1},toString:function(e,t){return t?this.value:""}}),gform.types.output=_.extend({},gform.types.input,{focus:function(){},toString:function(e,t){return t?this.value:""},display:function(){return gform.renderString((this.format||{}).value||"{{{value}}}",_.pick(this,"value","name","id","inline","valid","map","path","parsable","reportable","visible","parent","owner","data","editable","parent","fillable","array","columns","offset","ischild","pre","post"))},render:function(){return gform.render(this.type,this)},get:function(){return this.value},set:function(e){this.value=e,this.el.querySelector("output").innerHTML=this.display}}),gform.types.email=_.extend({},gform.types.input,{defaults:{validate:[{type:"valid_email"}]}}),gform.types.textarea=_.extend({},gform.types.input,{set:function(e){this.el.querySelector('textarea[name="'+this.name+'"]').value=e},get:function(){return"el"in this?this.el.querySelector('textarea[name="'+this.name+'"]').value:this.internalValue},render:function(){return gform.render(this.type,this).split("></textarea>").join(">"+_.escape(this.value)+"</textarea>")},focus:function(e){window.setTimeout(function(){if(null!==this.el.querySelector('textarea[name="'+this.name+'"]')&&"function"==typeof this.el.querySelector('textarea[name="'+this.name+'"]').focus){this.el.querySelector('textarea[name="'+this.name+'"]').focus();var e=this.value;this.set(""),this.set(e)}}.bind(this),e||0)}}),gform.types.switch=gform.types.checkbox=_.extend({},gform.types.input,gform.types.bool),gform.types.select=_.extend({},gform.types.input,gform.types.collection,{render:function(){if(void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){if(this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.other&&void 0===_.find(this.list,{value:"other"})&&(this.options.push({label:"Other",value:"other"}),this.list.push({label:"Other",value:"other"})),"string"==typeof this.placeholder&&(this.options.unshift({label:this.placeholder,value:"",i:-1,editable:!1,visible:!1,selected:!0}),this.list.unshift({label:this.placeholder,value:"",i:-1,editable:!1,visible:!1,selected:!0})),!this.mapOptions.waiting)if(this.multiple)_.isArray(this.value)||(this.value=[this.value]),_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this));else{(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;var e=_.find(this.list,{value:this.value});void 0===e?"string"==typeof this.placeholder?this.value="":(this.value=(this.list[0]||{value:""}).value,this.list.length&&(this.list[0].selected=!0)):e.selected=!0}this.update()}.bind(this)),this.mapOptions.on("collection",(function(e){e.field.field.owner.trigger("collection",e.field.field)}))),this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),"string"==typeof this.placeholder&&(this.options.unshift({label:this.placeholder,value:"",i:-1,editable:!1,visible:!1,selected:!0}),this.list.unshift({label:this.placeholder,value:"",i:-1,editable:!1,visible:!1,selected:!0})),!this.mapOptions.waiting)if(this.multiple)_.isArray(this.value)||(this.value=[this.value]),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this));else{this.other&&void 0===_.find(this.list,{value:"other"})&&(this.options.push({label:"Other",value:"other"}),this.list.push({label:"Other",value:"other"})),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1;var e=_.find(this.list,{value:this.value});void 0===e?this.other?this.value="other":"string"==typeof this.placeholder?this.value="":(this.value=(this.list[0]||{value:""}).value,this.list.length&&(this.list[0].selected=!0)):e.selected=!0}return gform.render("select",this)}}),gform.types.range=_.extend({},gform.types.input,gform.types.collection,{get:function(){return"el"in this?(this.el.querySelector("[type=range]")||{value:""}).value:this.internalValue},set:function(e){this.el.querySelector("[type=range]").value=e}}),gform.types.radio=_.extend({},gform.types.input,gform.types.collection,{setup:function(){if(this.multiple&&"undefinded"!=typeof this.limit&&(this.get().length>=this.limit?(this.maxSelected=!0,_.each(this.el.querySelectorAll("[type=checkbox]"),(function(e){e.disabled=!e.checked}))):this.maxSelected&&(this.maxSelected=!1,_.each(this.el.querySelectorAll("[type=checkbox]"),(function(e){e.disabled=!1}))),null!=this.el.querySelector(".count"))){var e=this.get().length;this.limit>1&&(e+="/"+this.limit),this.el.querySelector(".count").innerHTML=e}this.labelEl=this.el.querySelector("label"),gform.types[this.type].setLabel.call(this),this.infoEl=this.el.querySelector(".gform-info")},render:function(){return void 0!==this.item.size&&(this.size=Math.floor((gform.columns||12)/this.item.size)),void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.multiple?(_.isArray(this.value)||(this.value=[this.value]),_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):((_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0),this.update()}.bind(this)),this.mapOptions.on("collection",(function(e){e.field.field.owner.trigger("collection",e.field.field)}))),this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.mapOptions.waiting||(this.multiple?(_.isArray(this.value)||(this.value=[this.value]),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,_.each(this.value,function(e){(_.find(this.list,{value:e})||{selected:null}).selected=!0}.bind(this))):(void 0===_.find(this.list,{value:this.value})&&this.other&&(this.value="other"),this.other&&void 0===_.find(this.list,{value:"other"})&&this.options.push({label:"Other",value:"other"}),(_.find(this.list,{selected:!0})||{selected:null}).selected=!1,(_.find(this.list,{value:this.value})||{value:""}).selected=!0)),gform.render(this.type,this)},get:function(){if(!("el"in this))return this.internalValue;if(this.multiple){var e=this;return _.transform(this.el.querySelectorAll('[type="checkbox"]:checked'),(function(t,i){t.push(_.find(e.list,{i:parseInt(i.value)}).value).bind}),[])}return(_.find(this.list,{i:parseInt((this.el.querySelector('[type="radio"]:checked')||{value:null}).value)})||{value:""}).value},set:function(e){if(this.multiple){if(_.isArray(e)||(e=[e]),"undefinded"!=typeof this.limit&&e.length>this.limit)return!0;_.each(this.el.querySelectorAll("[type=checkbox]"),function(t){var i=_.find(this.list,{i:parseInt(t.value)});t.selected=void 0!==i&&e.indexOf(i.value)>=0,t.checked=void 0!==i&&e.indexOf(i.value)>=0}.bind(this))}else{var t,i;(this.el.querySelector('[value="'+(_.find(this.list,{value:this.value})||{i:""}).i+'"]')||{}).checked=!1,void 0!==(t=_.find(this.list,{value:e}))?null!==(i=this.el.querySelector('[value="'+t.i+'"]'))&&(e=e,i.checked="checked"):(e=this.default||null,void 0===(t=_.find(this.list,{value:e}))&&void 0!==this.defaultIndex&&(t=_.find(this.list,{index:""+this.defaultIndex})),void 0!==t&&null!==(i=this.el.querySelector('[value="'+t.i+'"]'))&&(i.checked="checked"))}"function"==typeof gform.types[this.type].setup&&gform.types[this.type].setup.call(this)},edit:function(e){this.editable=e,_.each(this.el.querySelectorAll("input"),(function(t){t.disabled=!e}))},focus:function(){this.el.querySelector('[type="radio"],[type="checkbox"]').focus()}}),gform.types.scale=_.extend({},gform.types.radio),gform.types.checkboxes=_.extend({},gform.types.radio,{multiple:!0}),gform.types._grid_row=_.extend({},gform.types.hidden,{toString:function(e,t){return t?this.multiple?this.value.length?_.reduce(this.value,function(e,t){var i=_.find(this.list,{value:t});return void 0!==i&&e.push(i.label),e}.bind(this),[])+"<hr>":"":(_.find(this.list,{value:this.value})||{label:""}).label:this.multiple?this.value.length?_.reduce(this.value,function(e,t){var i=_.find(this.list,{value:t});return void 0!==i&&(e+="<span>"+i.label+"</span>"),e}.bind(this),'<tr><td style="width:20%">'+this.label+"</td><td>")+"</td><tr>":'<tr><td style="width:20%">'+this.label+'</td> <td><span class="text-muted">(no selection)</span></td></tr>':'<tr><td style="width:20%">'+this.label+"</td> <td>"+((_.find(this.parent.list,{value:this.parent.value[this.name]})||{label:""}).label||'<span class="text-muted">(no selection)</span>')+"</td></tr>"}}),gform.types.grid=_.extend({},gform.types.input,gform.types.section,gform.types.collection,{toString:function(e,t){return t?gform.toString.call(this,e,t):"<dt>"+this.label+'</dt><dd><table class="table table-bordered">'+gform.toString.call(this,e)+"</table></dd><hr>"},render:function(){return void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.update()}.bind(this))),this.options=this.mapOptions.getobject(),this.list=this.mapOptions.getoptions(),this.fields=_.map(this.fields,(function(e){return _.assignIn({name:(gform.renderString(e.label)||"").toLowerCase().split(" ").join("_"),id:gform.getUID(),label:e.id||e.name},e)})),gform.render(this.type,this)},setup:function(){this.multiple&&"undefinded"!=typeof this.limit?_.each(this.fields,function(e){(this.value[e.name]||[]).length>=this.limit?(e.maxSelected=!0,_.each(this.el.querySelectorAll('[type=checkbox][name="'+e.id+'"]'),(function(e){e.disabled=!e.checked}))):e.maxSelected&&(e.maxSelected=!1,_.each(this.el.querySelectorAll('[type=checkbox][name="'+e.id+'"]'),(function(e){e.disabled=!1})))}.bind(this)):_.each(this.fields,function(e){var t=this.el.querySelector('[name="'+e.id+'"][value="'+(this.value[e.name]||"")+'"]');null!==t&&(t.checked="checked")}.bind(this)),this.labelEl=this.el.querySelector("label"),gform.types[this.type].setLabel.call(this),this.infoEl=this.el.querySelector(".gform-info")},initialize:function(){this.el.addEventListener("change",function(){this.value=this.get(),gform.types[this.type].setup.call(this),this.parent.trigger(["change","input"],this,{input:this.value})}.bind(this)),gform.types[this.type].setup.call(this),this.rows=[],this.fields=_.map(this.fields,(function(e){return e.type="_grid_row",e})),gform.types[this.type].setLabel.call(this)},get:function(){return"el"in this?this.multiple?_.transform(this.fields,function(e,t){e[t.name]=_.transform(this.el.querySelectorAll('[type="checkbox"][name="'+t.id+'"]:checked'),(function(e,t){e.push(t.value)}),[])}.bind(this),{}):_.transform(this.fields,function(e,t){e[t.name]=(this.el.querySelector('[type="radio"][name="'+t.id+'"]:checked')||{value:""}).value}.bind(this),{}):this.internalValue},set:function(e){this.multiple?_.each(this.fields,function(e,t){if("undefinded"!=typeof this.limit&&null!=e&&e.length>this.limit)return!0;_.each(this.el.querySelectorAll('[name="'+t.id+'"][type=checkbox]'),function(e,t){t.checked=e.indexOf(t.value)>=0}.bind(this,e[t.name]))}.bind(this,e)):_.each(this.fields,function(t){var i=this.el.querySelector('[name="'+t.id+'"][value="'+e[t.name]+'"]');null!==i&&(i.checked="checked")}.bind(this)),this.value=e,gform.types.grid.setup.call(this)},focus:function(){this.el.querySelector('[name="'+this.fields[0].id+'"]').focus()}}),gform.types.fieldset=_.extend({},gform.types.input,gform.types.section,{array:{max:5,min:1,duplicate:{enable:"auto"},remove:{enable:"auto"},append:{enable:!1},...gform.types.input.array}}),gform.types.template=_.extend({},gform.types.input,gform.types.section,{array:{columns:-1,template:e=>gform.create(gform.render("template",e)),container:".col-xs-12",rowClass:"list-group",max:5,min:1,duplicate:{enable:!0},remove:{enable:!0},append:{enable:!0},sortable:{enable:!0}},setLabel:function(){var e=gform.renderString(this.item.label||this.label,this);this.required&&(e+=this.requiredText+this.suffix);var t=this.el.querySelector("fieldset#"+this.id+">legend,fieldset#"+this.id+">label");null!==t&&(t.innerHTML=e),this.label=e,this.render()},edit:function(e){e!==this&&(e.target.classList.contains("gform-minus")||e.target.classList.contains("gform-add")||e.target.parentNode.classList.contains("gform-minus")||e.target.parentNode.classList.contains("gform-add"))||(this.modalEl=gform.create(gform.render("modal_container",{body:'<div class="gform-modal_body"></div>',footer:gform.render("child_modal_footer"),legend:this.label,name:"preview"})),this.container.addEventListener("click",this.owner.listener),this.modalEl.querySelector(".gform-modal_body").appendChild(this.container),this.modal=gform.prototype.modal.bind(this),this.modal(),this.find({visible:!0}).focus(this.owner.modalDelay),this.modalEl.querySelector(".done").addEventListener("click",()=>{this.render(),this.modal("hide")}),this.modalEl.querySelector(".gform-footer .gform-minus").addEventListener("click",function(e){this.modal("hide"),this.modalEl.querySelector(".gform-modal_body").removeChild(this.container),this.container.removeEventListener("click",this.owner.listener),this.am.removeField(this)}.bind(this)))},create:function(){var e=gform.create('<div class="list-group-item"></div>');return gform.addClass(e,"gform-edit"),e.setAttribute("id","el_"+this.id),this.container=gform.create("<fieldset></fieldset>"),e.removeEventListener("click",gform.types.template.edit.bind(this)),e.addEventListener("click",gform.types.template.edit.bind(this)),this.render(e),e},focus:function(e){this.owner.call("edit",this)},render:function(e){for(e=e||this.el;e.firstElementChild;)e.removeChild(e.firstElementChild);switch(typeof this.format.template){case"string":e.innerHTML=gform.renderString(this.format.template,this);break;case"function":e.innerHTML=this.format.template.call(null,this);break;default:e.innerHTML=gform.render("template_item",this)}return e},display:function(){return gform.renderString(this.format.template||'<div><h3>{{{label}}}</h3><dl class="dl-horizontal">{{#items}}<dt>{{{label}}}</dt><dd>{{{display}}}</dd>{{/items}}</dl></div>',_.pick(this,"value","label","name","id","inline","valid","map","path","parsable","reportable","visible","parent","editable","parent","fillable","array","columns","offset","ischild","pre","post","items"))}}),gform.types.table=_.extend({},gform.types.input,gform.types.section,{array:{columns:-1,template:e=>gform.create(gform.render("table",{labels:_.map(e.field.fields,e=>e.array?e.array.label||e.label:e.label||e.name),...e.field})),container:"table",rowTemplate:"<table><tbody></tbody></table>",rowSelector:"tbody",max:5,min:1,duplicate:{enable:!1},remove:{enable:!1},append:{enable:!0},sortable:{enable:!0}},edit:function(e){e!==this&&(e.target.classList.contains("gform-minus")||e.target.classList.contains("gform-add"))||(this.modalEl=gform.create(gform.render("modal_container",{body:'<div class="gform-modal_body"></div>',footer:gform.render("child_modal_footer"),legend:this.label,name:"preview"})),this.container.addEventListener("click",this.owner.listener),this.modalEl.querySelector(".gform-modal_body").appendChild(this.container),this.modal=gform.prototype.modal.bind(this),this.modal(),this.find({visible:!0}).focus(this.owner.modalDelay),this.modalEl.querySelector(".done").addEventListener("click",()=>{this.render(),this.modal("hide")}),this.modalEl.querySelector(".gform-footer .gform-minus").addEventListener("click",function(e){this.modal("hide"),this.modalEl.querySelector(".gform-modal_body").removeChild(this.container),this.container.removeEventListener("click",this.owner.listener),this.am.removeField(this)}.bind(this)))},create:function(){var e=document.createElement("tr");return gform.addClass(e,"gform-edit"),e.setAttribute("id","el_"+this.id),this.container=gform.create("<fieldset></fieldset>"),e.removeEventListener("click",gform.types.table.edit.bind(this)),e.addEventListener("click",gform.types.table.edit.bind(this)),this.render(e),e},focus:function(e){this.owner.call("edit",this)},render:function(e){for(e=e||this.el;e.firstElementChild;)e.removeChild(e.firstElementChild);e.innerHTML="",_.reduce(this.items,(e,t)=>{var i="";void 0!==(this.value||{})[t.name]&&""!==(this.value||{})[t.name]?i=(this.value||{})[t.name]:void 0!==t.value&&""!==t.value&&(i=t.value);var n=document.createTextNode(i);void 0!==t.display&&("string"==typeof t.display?n=gform.create(t.display):"function"==typeof t.display&&(n=gform.create(t.display.call(this))));var s=document.createElement("td");return void 0!==t.array&&s.setAttribute("id",t.array.ref),s.appendChild(n),e.appendChild(s),e},e)}}),gform.types.custom_radio=_.extend({},gform.types.input,gform.types.collection,{set:function(e){var t=this.el.querySelector('[data-value="'+e+'"]');null!==t&&t.click()},defaults:{selectedClass:"btn btn-success",defaultClass:"btn btn-default"},get:function(){return"el"in this?(this.el.querySelector("."+this.selectedClass.split(" ").join("."))||{dataset:{value:""}}).dataset.value:this.internalValue},toggle:function(e){var t=this.el.querySelector("."+this.selectedClass.split(" ").join("."));gform.toggleClass(t,this.selectedClass,!1),gform.toggleClass(t,this.defaultClass,!0),gform.toggleClass(e.target,this.defaultClass,!1),gform.toggleClass(e.target,this.selectedClass,!0),this.owner.trigger("change",this),this.owner.trigger("input",this)},initialize:function(){var e=this.el.querySelectorAll("a");for(const t of e)t.removeEventListener("click",gform.types[this.type].toggle.bind(this)),t.addEventListener("click",gform.types[this.type].toggle.bind(this));gform.types[this.type].setLabel.call(this)}}),gform.m=function(e,t,i,n){var s,r=gform.m,l="";function o(e,t){return e=null!=(e=e[(t=t.pop?t:t.split(".")).shift()])?e:"",0 in t?o(e,t):e}t=Array.isArray(t)?t:t?[t]:[],t=n?0 in t?[]:[1]:t;for(s=0;s<t.length;s++){var a,h="",d=0,u="object"==typeof t[s]?t[s]:{};(u=Object.assign({},i,u))[""]={"":t[s]},e.replace(/([\s\S]*?)({{((\/)|(\^)|#)(.*?)}}|$)/g,(function(e,t,i,n,s,f,c){d?h+=d&&!s||1<d?e:t:(l+=t.replace(/{{{(.*?)}}}|{{(!?)(&?)(>?)(.*?)}}/g,(function(e,t,i,n,s,l){return t?o(u,t):n?o(u,l):s?r(o(u,l),u):i?"":new Option(o(u,l)).innerHTML})),a=f),s?--d||(c=o(u,c),/^f/.test(typeof c)?l+=c.call(u,h,(function(e){return r(e,u)})):l+=r(h,c,u,a),h=""):++d}))}return l},gform.render=function(e,t){return gform.renderString(gform.stencils[e||"text"]||gform.stencils.text,_.extend({},gform.stencils,t))},gform.create=function(e,t){return document.createRange().createContextualFragment(e).querySelector(t||"*")||document.createRange().createContextualFragment(e).firstChild},gform.renderString=function(e,t){return gform.m(e||"",_.extend({math:function(e,t){return math.eval(t(e),_.omit(this,"toString"))},moment:function(e,t){var i=e.split("|"),n=moment(t(i.shift()));return"fromNow"==i[0]?n.fromNow():n.format(i[0])}},this.methods,t))},gform.addClass=function(e,t){void 0!==t&&t.length&&void 0!==e&&e&&(e.className=_.chain(e.className).split(/[\s]+/).union(t.split(" ")).join(" ").value())},gform.hasClass=function(e,t){if(void 0!==t&&t.length&&void 0!==e&&e)return-1!==e.className.indexOf(t)},gform.removeClass=function(e,t){void 0!==t&&t.length&&void 0!==e&&e&&(e.className=_.chain(e.className).split(/[\s]+/).difference(t.split(" ")).join(" ").value())},gform.toggleClass=function(e,t,i){i?gform.addClass(e,t):gform.removeClass(e,t)},gform.ajax=function(e){var t=new XMLHttpRequest;t.onreadystatechange=function(){4===t.readyState&&(200===t.status?e.success(JSON.parse(t.responseText)):"function"==typeof e.error&&e.error(t.responseText))},t.open(e.verb||"GET",e.path),t.send()},gform.patch=function(e,t,i){return _.isArray(t)||(t=[t]),_.reduce(t,(function(t,i){if("string"!=typeof i.map)return t;var n=_.toPath(i.map);for(e=t;n.length>1;){var s=n.shift();"object"!=typeof e[s]&&(isFinite(n[0])?_.isArray(e[s])||(e[s]=[]):e[s]={}),e=e[s]}return s=n.shift(),"delete"==i.action?_.isArray(e)?e.splice(s,1):(delete e[s],e=_.compact(e)):void 0!==i.toJSON?e[s]=i.toJSON:e[s]=i.value,t}),e||{})},_.mixin({selectPath:function(e,t){if(void 0!==e){var i=e;return i="function"==typeof e.toJSON?e.toJSON():_.extend({},i),_.reduce(_.toPath(t),(function(e,t){return"object"==typeof e&&null!==e?e[t]:void 0}),i)}}}),gform.eventBus=function(e,t){this.options=e||{owner:"form",item:"field"},this.owner=t||this,this.on=function(e,t,i){if(void 0!==e){var n=e.split(" ");_.each(n,function(e,i){this.handlers[i]=this.handlers[i]||[],"function"==typeof t?(this.handlers[i].push(t),"object"==typeof e&&e.push(t)):"function"==typeof this.owner.methods[t]&&this.handlers[i].push(this.owner.methods[t])}.bind(this,i))}return this.owner}.bind(this),_.isArray(e.handlers)?(this.handlers={},_.each(e.handlers,function(e){null!==e&&"event"in e&&"handler"in e&&this.on(e.event,e.handler)}.bind(this))):this.handlers=_.extend({},e.handlers),_.each(this.handlers,function(e,t,i){"function"==typeof e?i[t]=[e]:"string"==typeof e&&("function"==typeof this[e]?i[t]=[this[e]]:"function"==typeof this.owner[e]?i[t]=[this.owner[e]]:"methods"in this.owner&&"function"==typeof this.owner.methods[e]?i[t]=[this.owner.methods[e]]:"function"==typeof window[e]?i[t]=[window[e]]:i[t]=null)}.bind(this)),this.dispatch=function(e,i,n){(n=n||{})[this.options.owner]=this.owner,void 0!==i&&(n[this.options.item]=i),n.default=!0,n.continue=!0,n.preventDefault=function(){this.default=!1}.bind(n),n.stopPropagation=function(){this.continue=!1}.bind(n);var s=[];return"string"==typeof e?s.push(e):s=s.concat(e),_.each(s,function(e,i){e.event=i;var s=function(i){n.continue&&"function"==typeof i&&i.call(t,e)}.bind(this);_.each(this.handlers[i],s),_.each(this.handlers["*"],s)}.bind(this,n)),n}.bind(this)},gform.collectionManager=function(e){var t=e||{};return this.eventBus=new gform.eventBus({owner:"manager",item:"collection",handlers:{}},this),{add:function(e,i){t[e]=i,this.eventBus.dispatch("change",e)}.bind(this),get:function(e){return void 0===e?t:t[e]},update:function(e,i){void 0!==i&&(t[e]=i),this.eventBus.dispatch(e,t[e]),this.eventBus.dispatch("change",e)}.bind(this),on:this.eventBus.on}},gform.VERSION="0.0.2.0",gform.i=0,gform.getUID=function(){return"f"+gform.i++},gform.about=function(){return _.extend({version:gform.VERSION},gform.THEME,{types:_.keys(gform.types)})},gform.each=function(e){_.each(this.fields,(function(t){e(t),"fields"in t&&gform.each.call(t,e)}))},gform.reduce=function(e,t,i){return t=t||{},_.reduce(this.filter(i,1),(function(t,n){var s=e(t,n);return"fields"in n&&(s=gform.reduce.call(n,e,s,i)),s}),t),t},gform.reduceShallow=function(e,t,i){return t=t||{},_.reduce(this.filter(i,1),(function(t,i){return e(t,i)}),t),t},gform.reduceItems=function(e,t,i){return t=t||{},_.reduce(gform.filterItems.call(this,i),(function(t,i){return e(t,i)}),t),t},gform.filterItems=function(e,t){var i=[];return"string"==typeof e&&(e={name:e}),t=t||10,t--,_.reduce(this.items,(i,n)=>(n instanceof gform.arrayManager?(_.isMatch(n,e)&&i.push(n),i=_.reduce(n.instances,(function(i,n){return i.concat(gform.filterItems.call(n,e,t))}),i)):_.isMatch(n,e)&&i.push(n),t&&"items"in n&&n.items.length&&(i=i.concat(gform.filterItems.call(n,e,t))),i),i)},gform.find=function(e,t){var i,n;if("string"==typeof e)i=e.split("."),n=_.find(this.fields,{name:i.shift()});else if("number"==typeof e);else if("object"==typeof e)return gform.filter.call(this,e,t)[0]||!1;return void 0!==n?"find"in n?n.name==e||"number"==typeof e?n:n.find(i.join(".")):n:void 0!==this.parent&&"function"==typeof this.parent.find?this.parent.find(e):void 0},gform.findByID=function(e){return gform.filter.call(this,{id:e},10)[0]||!1},gform.filter=function(e,t){var i=[];return"string"==typeof e&&(e={name:e}),t=t||10,t--,_.each(this.fields,function(t,n){_.isMatch(n,e)&&i.push(n),t&&"fields"in n&&(i=i.concat(gform.filter.call(n,e,t)))}.bind(null,t)),i},gform.collections=new gform.collectionManager,gform.instances={},gform.prototype.options={autoFocus:!0,rootpath:"",actions:[{type:"cancel"},{type:"save"}],rowClass:"row",default:{type:"text",suffix:":",requiredText:'<span style="color:red">*</span>',validate:[],valid:!0,parsable:!0,reportable:!0,visible:!0,editable:!0,fillable:!0,array:!1},clear:!0,sections:""},gform.toJSON=function(e){if("string"==typeof e&&e.length>0){var t=this.find({map:e},_.toPath(e).length);if(!t&&!(t=this.find({name:e},_.toPath(e).length)))return;return t.get()}return gform.reduceItems.call(this,gform.patch,{},{parsable:!0})},gform.toString=function(e,t){if(t)return"string"==typeof e&&e.length>0?(e=e.split("."),_.find(this.fields,{name:e.shift()}).toString(e.join("."),t)):(i={},_.each(this.fields,(function(t){(t.visible||t.reportable)&&(t.array?(i[t.name]=i[t.name]||[],i[t.name].push(t.toString(e,!0))):i[t.name]=t.toString(e,!0))})),i);if("string"==typeof e&&e.length>0)return e=e.split("."),_.find(this.fields,{name:e.shift()}).toString(e.join("."));var i="";return _.each(this.fields,(function(e){e.reportable&&(i+=e.toString())})),i},gform.addConditions=function(e){gform.processConditions.call(e,e.show,(function(e){var t=this.visible!==e;this.visible=e,gform.types[this.type].show.call(this,this.visible),t&&((this.am||this.owner).reflow(),this.owner.trigger("change",this))})),gform.processConditions.call(e,e.edit,(function(e){this.editable=e,gform.types[this.type].edit.call(this,this.editable)})),"parse"in e||(e.parse=e.show),gform.processConditions.call(e,e.parse,(function(e){this.parsable=e})),"report"in e||(e.report=e.show),gform.processConditions.call(e,e.report,(function(e){this.reportable=e})),e.required&&gform.processConditions.call(e,e.required,(function(e){this.required!==e&&(this.required=e,gform.types[this.type].setLabel.call(this))}))},gform.mapOptions=function(e,t,i,n,s){s=s||[],e.owner instanceof gform&&(this.field=e),this.collections=n,this.eventBus=new gform.eventBus({owner:"field",item:"option"},this),this.optgroup=_.extend({},e),i=i||0;var r=this.optgroup.format;function l(e){return _.map(e,function(e){if("object"==typeof e&&"optgroup"==e.type)return e.map=new gform.mapOptions(_.extend({format:r},e),t,i,this.collections,s),e.map.on("*",function(e){this.eventBus.dispatch(e.event)}.bind(this)),e.id=gform.getUID(),gform.processConditions.call(this.field,e.edit,function(e,t,i){_.find(this.optgroup.options,{id:e}).editable=t,this.eventBus.dispatch("change")}.bind(this,e.id)),gform.processConditions.call(this.field,e.show,function(e,t,i){_.find(this.optgroup.options,{id:e}).visible=t,this.eventBus.dispatch("change")}.bind(this,e.id)),i+=e.map.getoptions().length,e;var n=_.extend({},e);return n.data=e,"string"!=typeof e&&"number"!=typeof e&&"boolean"!=typeof e||(n.label=n.value=e),n.index=e.index||""+i,void 0!==r&&(n=_.reduce(["label","display","value"],function(e,t){return t in r&&(t in e&&(e.original=e.original||{},e.original[t]=e[t]),e[t]="string"==typeof r[t]?gform.renderString(r[t],e):"function"==typeof r[t]?r[t].call(this,e):e[t]),e}.bind(this),n)),(n.value==t||null!=t&&t.length&&t.indexOf(n.value)>=0)&&(n.selected=!0),i+=1,n.i=i,n}.bind(this))}switch(this.optgroup.options=this.optgroup.options||[],typeof this.optgroup.options){case"string":this.optgroup.path=this.optgroup.path||this.optgroup.options,this.optgroup.options=[];break;case"function":this.optgroup.action=this.optgroup.options,this.optgroup.options=[]}if("max"in this.optgroup&&""!==this.optgroup.max)for(var o=this.optgroup.min||0;o<=this.optgroup.max;o+=this.optgroup.step||1)this.optgroup.options.push(""+o);"function"==typeof this.optgroup.action&&(this.optgroup.options=this.optgroup.options.concat(l.call(this,this.optgroup.action.call(this)))),_.isArray(this.optgroup.options)&&(this.optgroup.options=l.call(this,this.optgroup.options)),_.isString(this.optgroup.path)&&this.optgroup.path&&(this.collections.on(this.optgroup.path,function(e){this.optgroup.options=l.call(this.optgroup.map,e.collection),s.indexOf(e.event)>=0&&delete s[s.indexOf(e.event)],this.eventBus.dispatch("change")}.bind(this)),this.collections.get(this.optgroup.path)&&"waiting"!=this.collections.get(this.optgroup.path)?this.optgroup.options=l.call(this.optgroup.map,this.collections.get(this.optgroup.path)):(-1==s.indexOf(this.optgroup.path)&&s.push(this.optgroup.path),"waiting"!==this.collections.get(this.optgroup.path)&&(this.collections.add(this.optgroup.path,"waiting"),gform.ajax({path:(this.field.owner.options.rootpath||"")+this.optgroup.path,success:function(e){this.collections.update(this.optgroup.path,e),s.indexOf(this.optgroup.path)>=0&&delete s[s.indexOf(this.optgroup.path)],this.eventBus.dispatch("collection"),this.eventBus.dispatch("change")}.bind(this)}))));var a={getobject:function(){return _.map(this.optgroup.options,(function(e){return e.visible=!("visible"in e)||e.visible,e.editable=!("editable"in e)||e.editable,"map"in e?(e.options=e.map.getoptions(),{optgroup:{label:e.label||"",visible:e.visible,editable:e.editable,options:e.map.getoptions()}}):e}))}.bind(this),getoptions:function(e){var t=[];return _.each(this.optgroup.options,(function(e){e.visible=!("visible"in e)||e.visible,e.editable=!("editable"in e)||e.editable,"map"in e?t=t.concat(e.map.getoptions()):t.push(e)})),void 0!==e?_.find(t,e):t}.bind(this),on:this.eventBus.on,handlers:this.handlers,optgroup:this.optgroup};return Object.defineProperty(a,"waiting",{get:function(){return _.compact(s).length>0}}),a},gform.arrayManager=function(e){_.reduce(["reflow","find","filter"],(t,i)=>(i in gform.types[e.type]&&(t[i]=gform.types[e.type][i].bind(t)),t),this),this.field=e,this.name=this.field.name,this.owner=e.owner,this.array=e.array,this.array.min=0==this.array.min?0:this.array.min||1,this.parsable=!0,this.focus=function(){},this.satisfied=function(){var e=e||this.get();return null!=e&&""!==e&&!("object"==typeof e&&_.isEmpty(e))},this.fields=[],this.instances=[],this.id=gform.getUID(),this.field.array.refid=this.id,this.el=gform.types[this.field.type].array.template(this),this.container=gform.types[e.type].array.container||this.el,"string"==typeof gform.types[e.type].array.container&&(this.container=this.el.querySelector(gform.types[this.field.type].array.container)),this.rowManager=gform.rowManager(this),this.reflow=gform.reflow.bind(this),Object.defineProperty(this,"display",{get:function(){return _.reduce(this.instances,(e,t)=>e+="<div>"+t.display+"</div>","<div>")+"</div>"},enumerable:!0}),Object.defineProperty(this,"label",{get:function(){return this.internalLabel||this.field.array.label||this.field.label},set:function(e){this.internalLabel=e},enumerable:!0}),gform.addConditions.call(this.owner,this),Object.defineProperty(this,"map",{get:function(){if(!1===this.field.item.map)return this.field.item.map;var e="";return this.field.ischild&&(e=this.field.parent.map+"."),e+=this.field.name,this.field.item.map||e}}),Object.defineProperty(this,"toJSON",{get:function(){return this.get()},enumerable:!0}),gform.types[e.type].row,this.get=function(){return _.map(this.instances,e=>e.get())},this.addField=function(e,t){if(void 0===t&&(t=this.field),!t.editable||this.instances.length>=(t.array.max||5))return!1;var i=_.findIndex(this.instances,{id:t.id})+1||this.instances.length,n=t.owner.fieldMethods.cultivate({...e,index:i},this.field);return this.instances.splice(i,0,n),gform.addConditions.call(t.owner,n),gform.each.call(n,gform.addConditions),_.each(_.filter(this.instances,(function(e){return e.name==t.name&&void 0!==e.array&&!!e.array})),(function(e,t){e.index=t,gform.types[e.type].setLabel.call(e)})),gform.types[n.type].focus.call(n),n.parent.trigger(["change","input","create","inserted"],n),n.owner.updateActions(n),n},this.removeField=function(e){var t=this.instances.length;if(e.editable&&t>(e.array.min||0)){void 0!==e.eventlist&&_.each(e.owner.eventBus.handlers,(function(t,i,n){_.each(t,(function(t,i,n,s){_.each(e.eventlist,function(e,i,n){t==n&&delete i[e]}.bind(null,i,n))})),n[i]=_.compact(n[i])}));var i=_.findIndex(this.instances,{id:e.id});this.instances[i].el.parentElement.removeChild(this.instances[i].el),this.instances.splice(i,1),e.am.reflow(),_.each(_.filter(this.instances,(function(t){return t.name==e.name&&void 0!==t.array&&!!t.array})),(function(e,t){e.index=t,gform.types[e.type].setLabel.call(e)})),e.parent.trigger(["change","input","removed"],e),t--}else e.editable&&e.set(null),e.parent.trigger(["input"],e);e.owner.updateActions(e)}},gform.field={cultivate:function(e){return(t,n)=>{if(t={parent:e,owner:e,el:null,instance:null,data:void 0,am:null,...t},(n=e.fieldMethods.normalize(t,n)).owner=e,"object"==typeof t.data&&n.name in t.data?t.data=t.data[n.name]:(delete t.data,0==e.options.strict&&"object"==typeof e.options.data&&n.name in e.options.data&&(t.data=e.options.data[n.name])),n.array&&!n.am){let e=new gform.arrayManager(n);n.am=e,"object"==typeof t.data&&_.each(t.data,(i,s)=>{e.addField({...t,data:{[n.name]:i},index:s},n)});let i=e.instances.length;for(;i<n.array.min;)e.addField({...t,data:((t.data||{})[n.name]||[])[i]||"section"==gform.types[n.type].base?{}:"",index:i},n),i++;return e}switch("object"==typeof e.options.data&&"data"in e.options.data&&Object.defineProperty(n,"data",{get:()=>e.options.data.data,enumerable:!0}),"function"==typeof(n=_.reduce(["value","label","placeholder","help","info","pre","post"],(e,t)=>("string"==typeof e[t]&&!0!==e.raw&&(e[t]=gform.renderString("string"==typeof e.item[t]?e.item[t]:e[t],e)),e),n)).item.value||"string"==typeof n.item.method&&"function"==typeof n.owner.methods[n.item.method]?n.derivedValue=e=>(n.set((n.owner.methods[n.item.method]||n.item.value).call(null,{form:n.owner,field:n,initial:n,...e}),!0),n.internalValue):"string"==typeof n.item.value&&0===n.item.value.indexOf("=")&&(n.derivedValue=()=>{const e=n.owner.get();n.formula=gform.renderString(n.item.value.substr(1),e);try{if(n.formula.length&&"undefined"!=typeof math){var t=math.eval(n.formula,e);"object"==typeof t&&"entries"in t&&"object"==typeof(t=_.last(t.entries))._data&&(t=t._data),n.formula=_.isFinite(t)?t.toFixed(n.item.precision||0):_.isArray(t)?t:""}}catch(e){n.formula=""}return n.formula}),n.set=(e,t)=>("fields"in this&&"object"==typeof e&&(e=_.pick(e,_.map(n.fields,"name"))),n.internalValue==e&&null!=e||gform.types[n.type].set.call(n,e)||(n.internalValue=e,t||n.trigger(["change"],n)),n.internalValue),n.fillable&&("function"==typeof n.derivedValue?(n.value=n.owner.call("resetValue",n),n.value=n.derivedValue(),n.owner.on("input",e=>{e.initial=n;var t=n.value,i=n.derivedValue(e);i!=t&&e.default&&(n.set.call(null,i),e.field!==n&&e.continue&&e.form.trigger("input",n))})):n.value="data"in t?t.data:"value"in n.item?n.item.value:e.call("resetValue",n),t.data="data"in t?t.data:n.value),n.internalValue=n.value,Object.defineProperty(n,"value",{get:()=>n.internalValue,set:e=>{n.set(e,!0)},enumerable:!0}),Object.defineProperty(n,"active",{get:()=>n.isActive&&n.parent.active&&n.editable&&n.parsable&&n.visible,enumerable:!0}),Object.defineProperty(n,"display",{get:()=>"display"in n.item&&"function"==typeof n.item.display?n.display.call(n):"display"in gform.types[n.type]?gform.types[n.type].display.call(n):n.toString(),enumerable:!0}),Object.defineProperty(n,"sibling",{get:()=>n.am instanceof gform.arrayManager,enumerable:!0}),Object.defineProperty(n,"isSatisfied",{get:()=>n.satisfied(n.get())}),Object.defineProperty(n,"path",{get:()=>{let e="/";return n.ischild&&(e=n.parent.path+"."),e+=n.name,n.array&&(e+="."+n.id),e}}),Object.defineProperty(n,"map",{get:()=>{if(!1===n.item.map)return n.item.map;let e="";return n.ischild&&(e=n.parent.map+"."),e+=n.name,n.array&&(e+="."+n.index),n.item.map||e}}),Object.defineProperty(n,"source",{get:()=>{if(!1===n.item.source)return n.item.source;var e="";return n.ischild&&(e=n.parent.source+"."),e+=n.name,n.array&&(e+="."+n.index),n.item.source||e||n.map}}),Object.defineProperty(n,"relative",{get:()=>{var e="/";return n.ischild&&(e=n.parent.relative+"."),e+n.name}}),n.trigger=gform.types[n.type].trigger?gform.types[n.type].trigger.bind(n):n.parent.trigger,n.columns=_.min([n.columns,e.options.columns]),n=_.reduce(["get","toString","satisfied","render","update","destroy","focus","reflow","find","filter"],(t,i)=>(!(i in t)&&i in gform.types[t.type]&&(t[i]=e.bind(i,t)),t),n),Object.defineProperty(n,"toJSON",{get:()=>n.get(),enumerable:!0}),n.el=e.call("create",n),typeof n.container){case"string":n.container=n.el.querySelector(n.container);break;case"undefined":n.container=n.el.querySelector("fieldset")||n.el||null}return n.section&&e.el.querySelector("."+e.options.sections+"-content").appendChild(n.el),e.call("initialize",n),n.isActive=!0,_.isArray(n.item.data)&&(n.meta=n.item.data,_.each(n.meta,(function(e){"string"!=typeof e.key||""===e.key||e.key in n||Object.defineProperty(n,e.key,{get:function(e,t){return _.find(t.meta,{key:e}).value}.bind(null,e.key,n),set:function(t,i,n){_.find(i.meta,{key:t}).value=n,i.parent.trigger(e.key,i)}.bind(null,i.key,n),configurable:!0,enumerable:!0})}))),n.fields&&(n.items=_.map(n.fields,e.fieldMethods.cultivate.bind(null,{data:t.data,parent:n})),Object.defineProperty(n,"fields",{get:()=>_.reduce(n.items,(e,t)=>(t instanceof gform.arrayManager?e=e.concat(t.instances):e.push(t),e),[])})),n}},normalize:function(e){return(t,i)=>{var n=t.parent||e;"type"in i&&i.type in gform.types||(console.warn('Field type "'+i.type+'" not supported - using '+(e.options.default.type||"text")+" instead"),i.type=e.options.default.type),i.item=_.clone(i);const{index:s,id:r,...l}=i;return(i={id:gform.getUID(),index:t.index||s||i.instance||0,label:i.legend||i.title||(gform.types[i.type]||gform.types.text).defaults.label||i.name,parent:n,columns:t.columns||e.options.columns,offset:t.offset||gform.offset||0,ischild:!(n instanceof gform),format:{},...e.options.default,...(gform.types[i.type]||gform.types.text).defaults,...l}).array&&("object"!=typeof i.array&&(i.array={}),i.array=_.defaultsDeep(i.array,(gform.types[i.type]||{}).array,{max:5,min:1,duplicate:{enable:"auto"},remove:{enable:"auto"},append:{enable:!0}}),i.array.ref=i.array.ref||gform.getUID()),"multiple"in i||(i.multiple="limit"in i&&i.limit>1),i.name=(i.name||(gform.renderString(i.legend||i.label||i.title,i)||"").toLowerCase().split(" ").join("_")||i.id)+"",i}}},gform.rowManager=e=>{let t=e.rows||[],{rowClass:i,columns:n,rowTemplate:s,container:r,rowSelector:l}={rowClass:"row",columns:gform.prototype.options.columns,rowTemplate:"<div></div>",container:gform.create(gform.renderString("<div></div>",e)),...(e.owner||e).call("array",e.field),...e};const o=e=>{if(e.forceRow)return a(e);let i=t[t.length-1]||a(e);return-1!==n&&i.used+e.size>n&&(i=a(e)),i},a=e=>{let n={ref:gform.create(s,l),id:gform.getUID(),used:0};return n.ref.setAttribute("id",n.id),gform.addClass(n.ref,i),Object.defineProperty(n,"field",{set:e=>{e.el instanceof Node?((void 0===l?n.ref:n.ref.querySelector(l)||n.ref).appendChild(e.el),n.used+=e.columns,n.used+=e.offset):console.warn("Field element must be a node")}}),t.push(n),r.appendChild(n.ref),n};let h={get:o,add:a,clear:e=>{_.each(t,e=>{if(void 0!==e)try{r.removeChild(e.ref)}catch(e){}}),r="object"==typeof e&&"container"in e?e.container:r,t=[]},insert:e=>{e.columns="columns"in e?parseInt(e.columns,10):gform.prototype.options.columns,e.offset=parseInt(e.offset,10)||0;let t=e.columns+e.offset;-1!==n&&t>n&&(console.warn('Requested size "'+t+'" exceeds row size'),e.columns>n&&(console.warn('Requested columns "'+e.columns+'" exceeds row size, using column size of '+n),e.columns=n,t=e.columns+e.offset),t>n&&(console.warn("Requested offset of "+e.offset+" pushes size over maximum row size of "+n+" using offset of "+(n-e.columns)),e.offset=n-e.columns,t=e.columns+e.offset)),o({size:t,...e}).field=e}};return Object.defineProperty(h,"rows",{get:()=>t}),h},gform.reflow=function(e){if("object"==typeof this.rowManager)return this.rowManager.clear(e),_.reduce(this.items||this.instances,(e,t)=>(this.rowManager.insert(t),gform.reflow.call(t)),!1)},gform.processConditions=function(e,t){if("string"==typeof e&&("show"!==e&&"edit"!==e&&"parse"!==e||(e=this.item[e]),"string"==typeof e&&0==e.indexOf("method:")&&void 0!==this.owner.methods&&"function"==typeof this.owner.methods[e.split("method:")[1]]&&t.call(this,this.owner.methods[e.split("method:")[1]].call(null,{form:this.owner,field:this}),{form:this.owner,field:this})),"boolean"==typeof e&&t.call(this,e,{form:this.owner,field:this}),"function"==typeof e&&t.call(this,e.call(null,{form:this.owner,field:this}),{form:this.owner,field:this}),"object"==typeof e){var i=function(e,t,i){t.call(this,gform._rules.call(this,e),i)}.bind(this,e,t);gform._subscribeByName.call(this,e,i)}return!0},gform._subscribeByName=function(e,t){if(this.owner instanceof gform)for(var i in e)if("object"==typeof e[i].conditions)gform._subscribeByName.call(this,e[i].conditions,t);else{var n=this.parent.find(e[i].name||this.name);0!==(e[i].name||this.name).indexOf("/")&&void 0!==n?(this.eventlist=this.eventlist||[],this.owner.on("change:"+n.path,t,this.eventlist)):this.owner.on("change:"+(e[i].name||this.name),t)}},gform._rules=function(e,t){return t=t||"and",_.reduce(e,function(e,i){var n;return n=void 0!==i.conditions?gform._rules.call(this,i.conditions,i.op):gform.conditions[i.type](this,i),"or"==t?e||n:e&&n}.bind(this),"and"==t)},gform.conditions={requires:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;return i.satisfied()},not_matches:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=i[t.attribute||"value"];return"object"==typeof s&&null!==s&&null!==r?-1==s.indexOf(r):s!==r},test:function(e,t){return t.test.call(this,e,t)},contains:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t.value,r=i,l=null;if(void 0!==r)l=0!=r.array?e.parent.find(t.name).parent.get()[t.name]:r.value;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1;return"object"!=typeof s||null===s||null===l?void 0!==l&&-1!==l.indexOf(s):"object"==typeof l?_.intersection(s,l).length>0:"string"==typeof l?_.some(s,(function(e){return l.indexOf(e)>=0})):void 0},matches:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=i[t.attribute||"value"];return"object"==typeof s&&null!==s&&null!==r?-1!==s.indexOf(r):s==r},matches_bool:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=i[t.attribute||"value"];return("false"==s||!s)==("false"==r||!r)},matches_numeric:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=parseInt(i[t.attribute||"value"]);return"object"==typeof s&&null!==s&&null!==r?-1!==_.map(s,(function(e){return parseInt(e)})).indexOf(r):parseInt(s)==r},numeric:function(e,t){var i;if(void 0!==t.name&&t.name){var n=e.parent.filter({name:t.name,parsable:!0},t.depth||10);if(n.length>0)i=n[0];else if(e.name==t.name)i=e;else if(void 0===(i=e.parent.find(t.name)||e.owner.filter({path:t.name},t.depth||10)[0]))return!1}else i=e;var s=t[t.attribute||"value"],r=parseInt(i[t.attribute||"value"]);return gform.regex.decimal.test(value)||""===value?(t.min="number"==typeof this.min?this.min:"number"==typeof t.min?t.min:null,null!==t.min&&parseFloat(value)<parseFloat(t.min)?"{{label}} must contain a number not less than {{args.min}} ":(t.max="number"==typeof this.max?this.max:"number"==typeof t.max?t.max:null,null!==t.max&&parseFloat(value)>parseFloat(t.max)?"{{label}} must contain a number not more than {{args.max}}":"object"==typeof s&&null!==s&&null!==r?-1!==_.map(s,(function(e){return parseInt(e)})).indexOf(r):parseInt(s)==r)):"{{label}} must contain only numbers"}},gform.prototype.validate=function(e){return this.valid=!0,_.each(this.fields,gform.validateItem.bind(null,e)),this.valid?this.trigger("valid"):this.trigger("invalid",{errors:this.errors}),this.trigger("validation"),this.valid},gform.handleError=gform.update,gform.validateItem=function(e,t){var i=t.get();if((e||!t.valid||t.required||t.satisfied(i))&&(t.valid=!0,t.errors="",t.parsable&&"object"==typeof t.validate)){var n=[];if(t.required){var s=!t.satisfied(t.get())&&"{{label}} is required";s&&n.push(gform.renderString(t.required.message||s,{label:t.label,value:i,args:t.required}))}n.length||(n=gform.validation.call(t,t.validate)),n=_.compact(n),(void 0===t.display||t.visible)&&(t.valid=!n.length,t.errors=n.join("<br>"),gform.handleError(t))}t.parsable&&void 0!==t.fields&&_.each(t.fields,gform.validateItem.bind(null,e)),t.errors?t.owner.trigger("invalid:"+t.name,{errors:t.errors}):t.owner.trigger("valid:"+t.name),t.owner.errors[t.name]=t.errors,t.owner.errors=_.pickBy(t.owner.errors),t.owner.valid=t.valid&&t.owner.valid},gform.validation=function(e,t){t=t||"and";var i=this.get(),n=_.map(e,function(e,t){if("string"==typeof t.type){if(void 0===t.conditions||gform._rules.call(this,t.conditions)){var n=e[t.type].call(this,i,t);if(n)return gform.renderString(t.message||n,{label:this.label,value:i,args:t})}}else if(void 0!==t.tests)return gform.validation.call(this,t.tests,t.op).join("<br>")}.bind(this,gform.validations));return"and"==t||_.compact(n).length==e.length?n:[]},gform.regex={numeric:/^[0-9]+$/,decimal:/^\-?[0-9]*\.?[0-9]*$/,url:/(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?/,date:/^(0[1-9]|1[0-2])\/(0[1-9]|1\d|2\d|3[01])\/(19|20)\d{2}$/,email:/^[a-z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,6}$/i},gform.validations={none:function(e){return!1},required:function(e){return!this.satisfied(e)&&"{{label}} is required"},unique:function(e){return this.parent.get()[this.name].indexOf(this.value)!=this.index&&"{{label}} is a duplicate"},pattern:function(e,t){var i=t.regex;return"string"==typeof i&&(i=void 0!==gform.regex[i]?gform.regex[i]:new RegExp(t.regex,t.flags)),!i.test(e)&&""!==e&&t.message},custom:function(e,t){return("function"==typeof t.test||"string"==typeof t.test&&"function"==typeof this.owner.methods[t.test])&&(t.test=this.owner.methods[t.test]||t.test),t.field=this,t.form=this.owner,t.value=e,t.test.call(null,t)},matches:function(e,t){if(void 0!==t.name){var i=this.parent.find(t.name);return void 0===i?"Matching field not defined":(t.label=i.label,t.value=i.get(),e!=t.value&&'"{{label}}" does not match the "{{args.label}}" field')}if(void 0!==t.value)return _.isArray(t.value)?-1===t.value.indexOf(e)&&'"{{label}}" does not match "{{args.value}}"':e!=t.value&&'"{{label}}" does not match "{{args.value}}"'},date:function(e){return!gform.regex.date.test(e)&&""!==e&&"{{label}} should be in the format MM/DD/YYYY"},valid_url:function(e){return!gform.regex.url.test(e)&&""!==e&&"{{label}} must contain a valid Url"},valid_email:function(e){return!gform.regex.email.test(e)&&""!==e&&"{{label}} must contain a valid email address"},length:function(e,t){return gform.regex.numeric.test(t.max)||gform.regex.numeric.test(t.min)?"number"==typeof t.max&&"number"==typeof t.min&&t.min==t.max?t.min!=e.length&&"{{label}} must be exactly "+t.min+" characters in length":"number"==typeof t.max&&e.length>t.max?"{{label}} must not exceed "+t.max+" characters in length":"number"==typeof t.min&&e.length>0&&e.length<t.min&&"{{label}} must be at least "+t.min+" characters in length":"Invalid length requirement"},numeric:function(e,t){return gform.regex.decimal.test(e)||""===e?(t.min="number"==typeof parseFloat(this.min)?parseFloat(this.min):"number"==typeof parseFloat(t.min)?parseFloat(t.min):null,null!==t.min&&parseFloat(e)<parseFloat(t.min)?"{{label}} must contain a number not less than {{args.min}} ":(t.max="number"==typeof parseFloat(this.max)?parseFloat(this.max):"number"==typeof parseFloat(t.max)?parseFloat(this.max):null,null!==t.max&&parseFloat(e)>parseFloat(t.max)?"{{label}} must contain a number not more than {{args.max}}":void 0)):"{{label}} must contain only numbers"}};
gform.stencils={_style:'.array_container + button.create {\n\t\tdisplay: none;\n\n\t  }\n\n\t  .array_container:empty + button.create{\n\t\tdisplay: inline-block;\n\t  }\ninput + .falseLabel {\n\tdisplay: inline;\n}\ninput + .falseLabel+ .trueLabel {\n\tdisplay: none;\n}\ninput:checked + .falseLabel + .trueLabel {\n\tdisplay: inline;\n}\ninput:checked + .falseLabel {\n\tdisplay: none;\n}\n.combobox-container .form-control[contenteditable="false"]\n{\n\tbackground: #eee;\n}\n@media (min-width: 992px) {\n\t.row .col-md-Infinity:first-child{margin-left: 15px;}\n\t.col-md-Infinity{display:inline-block;padding:0 20px 0 0}\n}\n\n@media (max-width: 991px) {\n\t.row .col-md-Infinity:first-child{margin-top: 5px !important;}\n\t.row .col-md-Infinity{margin-left: 15px;}\n}\n/* The switch - the box around the slider */\n.switch {\n\tposition: relative;\n\tdisplay: inline-block;\n\twidth: 4rem;\n\theight: 2.2rem;\n}\n\n/* Hide default HTML checkbox */\n.switch input {\n\topacity: 0;\n\twidth: 0;\n\theight: 0;\n}\n\n/* The slider */\n.switch .slider {\n\tposition: absolute;\n\tcursor: pointer;\n\ttop: 0;\n\tleft: 0;\n\tright: 0;\n\tbottom: 0;\n\tbackground-color: #ccc;\n\t-webkit-transition: 0.2s;\n\ttransition: 0.2s;\n\tborder: solid 0.1rem #c8c8c8;\n}\n\n.switch .slider:before {\n\tposition: absolute;\n\tcontent: "";\n\theight: 1.8rem;\n\twidth: 1.8rem;\n\tleft: 0.1rem;\n\tbottom: 0.1rem;\n\tbackground-color: white;\n\t-webkit-transition: 0.2s;\n\ttransition: 0.2s;\n}\n\ninput:checked + .slider {\n\tbackground-color: #1690d8;\n}\n\ninput:focus + .slider {\n\tborder-color: #1690d8;\n\tbox-shadow: 0 0 0 0.125em rgba(50, 115, 220, 0.25);\n}\n\ninput:checked + .slider:before {\n\t-webkit-transform: translateX(1.8rem);\n\t-ms-transform: translateX(1.8rem);\n\ttransform: translateX(1.8rem);\n}\ninput:disabled + .slider {\n\tbackground-color: #ddd;\n}\n/* Rounded sliders */\n.switch .slider.round {\n\tborder-radius: 2rem;\n}\n\n.switch .slider.round:before {\n\tborder-radius: 50%;\n}\n\n.gform-info {\n\tposition:absolute;\n\tright:10px;\n\tcursor: pointer;\n\tfont-weight: bold;\n\twidth: 2.2rem;\n\theight: 2.2rem;\n\tmargin-right: 0.5rem;\n\tline-height: 2.2rem;\n\tcolor: #fff;\n\ttext-align: center;\n\tbackground: rgba(0, 0, 0, 0.38);\n\tborder-radius: 50%;\n  }\n  .gform-info:after {\n\tcontent: "?";\n  }\n  .gform-info:hover {\n\tbox-shadow: 0px 0px 2px #000;\n  }\n  \n  .info-close {\n\tfloat: right;\n\tcursor: pointer;\n\tborder: solid 1px;\n\tborder-radius: 0.5rem;\n\tfont-weight: bold;\n\tpadding: 0 0.7rem;\n  }\n  .info-close:after {\n\tcontent: "X";\n  }\n  #tooltip {\n\tbackground-color: #333;\n\tcolor: #fff;\n\tpadding: 5px 10px;\n\tborder-radius: 4px;\n\tfont-size: 13px;\n\tmax-width: 400px;\n  }\n  #tooltip .title {\n\tfont-weight: bold;\n\tmargin-right: 40px;\n  }\n  \n  #tooltip hr,\n  #tooltip .gform-add, #tooltip .gform-minus {\n\tdisplay: none;\n  }\n\n\n\n\n\n\n\n\n\n\n\n  #arrow,\n  #arrow::before {\n\tposition: absolute;\n\twidth: 8px;\n\theight: 8px;\n\tz-index: -1;\n  }\n  \n  #arrow::before {\n\tcontent: "";\n\ttransform: rotate(45deg);\n\tbackground: #333;\n  }\n \n\n  \n\n\n\n\n\n  \n  label.required:after,\n\tlegend.required:after {\n\tcontent: "*";\n\tcolor: #f00;\n\t}\n\n\thtml,body{\n\t\t-webkit-overflow-scrolling : touch !important;\n\t\toverflow: auto !important;\n\t\theight: 100% !important;\n\t}\n\t@media print {\n\t\tbody {\n\t\t\theight: auto !important;\n\t\t}\n\t}\n',_container:'<form id="{{name}}" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform {{modifiers}}{{#options.horizontal}} form-horizontal{{/options.horizontal}} " {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}>{{^legendTarget}}{{#legend}}<legend>{{{legend}}}</legend>{{/legend}}{{/legendTarget}}</form><div class="gform-footer"></div>',text:'<div class="row clearfix form-group {{modifiers}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12">{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8">{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12">\n\t{{/label}}\n\t\t{{#pre}}<div class="input-group col-xs-12"><span class="input-group-addon">{{{pre}}}</span>{{/pre}}\n    {{^pre}}{{#post}}<div class="input-group">{{/post}}{{/pre}}\n\t\t<input {{^autocomplete}}autocomplete="off"{{/autocomplete}} class="form-control" {{^editable}}readonly disabled{{/editable}} {{#limit}}maxlength="{{limit}}"{{/limit}} min="{{min}}" {{#max}} max="{{max}}"{{/max}} {{#step}} step="{{step}}"{{/step}} placeholder="{{placeholder}}" type="{{elType}}{{^elType}}{{type}}{{/elType}}" name="{{name}}" id="{{id}}" value="" />\n\t\t{{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}\n    {{^post}}{{#pre}}</div>{{/pre}}{{/post}}\n\t\t{{#limit}}<small class="count text-muted" style="display:block;text-align:right">0/{{limit}}</small>{{/limit}}\n\n\t\t{{>_addons}}\n\t\t{{>_actions}}\n\t</div>\n</div>',output:'\n<div class="row">\n<div>\n\t\t{{>_label}}\n\t\t\n\t<div class="col-xs-12">\n    <output name="{{name}}" id="{{id}}">{{{display}}}{{^display}}&nbsp;{{/display}}</output>\n\t\t{{>_addons}}\n\t\t{{>_actions}} \n\t\t</div>\n    </div>\n    </div>\n',grid:'<div class="row">\n<fieldset id="{{id}}" name="{{name}}" class="row"  style="margin-bottom:20px">\n    {{>_label}}\n\t<div class="col-xs-12">\n    \t<table class="table table-striped" style="margin-bottom:0">\n\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t<th></th>\n\t\t\t\t\t{{#options}}\n\t\t\t\t\t<th><label>{{label}}</label></th>\n\t\t\t\t\t{{/options}}\n\t\t\t\t</tr>\n\t\t\t</thead>\n\t\t\t<tbody>\n\t\t\t{{#fields}}\n\t\t\t\t<tr>\n\t\t\t\t\t<td><label style="font-weight: 500;" for="{{id}}">{{{label}}}</label></td>\n\t\t\t\t\t{{#options}}\n\t\t\t\t\t<td>\n\t\t\t\t\t{{#multiple}}\n\t\t\t\t\t\t<div><input name="{{id}}" type="checkbox" {{#selected}} checked {{/selected}} value="{{value}}"/>\n\t\t\t\t\t{{/multiple}}\n\t\t\t\t\t{{^multiple}}\n\t\t\t\t\t\t<input style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{value}}" type="radio">\n\t\t\t\t\t{{/multiple}}\n\t\t\t\t\t</td>\n\t\t\t\t\t{{/options}}\n\t\t\t\t</tr>\n\t\t\t\t{{/fields}}\n\t\t\t</tbody>\n\t\t</table>\n\t\t{{>_addons}}\n\t\t{{>_actions}}\n\t</div>\n</fieldset>\n</div>',switch:'<div class="row clearfix {{modifiers}} {{#array}}isArray" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/array}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12" style="margin:0 0 5px">{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8" style="margin:0 0 15px">{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12" style="margin: -10px 0 5px;"">\n\t{{/label}}\n\t<div>\n\t<span class="falseLabel">{{{options.0.label}}} </span>\n\t\t<label class="switch">\n\t\t<input name="{{name}}" type="checkbox" {{^editable}}disabled{{/editable}} {{#options.1.selected}}checked=checked{{/options.1.selected}} value="{{value}}" id="{{id}}" />\n\t\t<span class="slider round"></span>\n\t\t</label>\n\t\t<span class="trueLabel">{{{options.1.label}}}</span>\n\t\t</div>\n\t\t{{>_addons}}\n\t\t{{>_actions}}\n\t</div>\n</div>',hidden:'<input type="hidden" name="{{name}}" value="{{value}}" />{{>_addons}}',textarea:'<div class="row clearfix form-group {{modifiers}} {{#array}}isArray" data-min="{{array.min}}" data-max="{{array.max}}{{/array}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>\n\t{{/label}}\n\t\t<textarea class="form-control"  {{^editable}}readonly disabled{{/editable}} {{#limit}}maxlength="{{limit}}"{{/limit}} style="width:100%;height:auto;min-height:20px" rows="{{size}}{{^size}}3{{/size}}" name="{{name}}" id="{{id}}" placeholder="{{placeholder}}"></textarea>\n\t\t{{#limit}}<small class="count text-muted" style="display:block;text-align:right">0/{{limit}}</small>{{/limit}}\n\t\t{{>_addons}}\n\t\t\t{{>_actions}}\n\t</div>\n</div>',contenteditable:'<div class="row clearfix form-group {{modifiers}} {{#array}}isArray" data-min="{{array.min}}" data-max="{{array.max}}{{/array}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8" {{#advanced}}style="padding:0px 13px"{{/advanced}}>{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12" {{#advanced}}style="padding:0px 13px"{{/advanced}}>\n\t{{/label}}\n\n\t\t<div class="formcontrol" style="height:auto" id={{id}}><div placeholder="{{placeholder}}" style="outline:none;border:solid 1px #cbd5dd;{{^unstyled}}background:#fff;padding:10px{{/unstyled}}" name="{{name}}">{{content}}{{value}}</div></div>\n\t\t{{#limit}}<small class="count text-muted" style="display:block;text-align:right">0/{{limit}}</small>{{/limit}}\n\t\t{{>_addons}}\n\t\t\t{{>_actions}}\n\t</div>\n</div>',select:'<div class="row clearfix form-group {{modifiers}} {{#size}}size={{size}}{{/size}} {{#array}}isArray" data-min="{{array.min}}" data-max="{{array.max}}{{/array}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12">{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8">{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12">\n\t{{/label}}\t\t\n\t{{#limit}}{{#multiple}}<small class="count text-muted" style="display:block;text-align:right">0/{{limit}}</small>{{/multiple}}{{/limit}}\n\n\t\t{{#pre}}<div class="input-group"><span class="input-group-addon">{{{pre}}}</span>{{/pre}} \n\t\t{{^pre}}{{#post}}<div class="input-group">{{/post}}{{/pre}}\n\t\t{{#mapOptions.waiting}}<i class="fa fa-spinner fa-spin" style="font-size:20px;position:absolute;top:7px;left:22px;color:#666"></i>{{/mapOptions.waiting}}\n\t\t\t<select class="form-control test"  {{#multiple}}multiple=multiple{{/multiple}} {{#size}}size={{size}}{{/size}}  name="{{name}}{{#multiple}}[]{{/multiple}}" value="{{value}}" id="{{id}}" />\n\t\t\t{{#options}}\n\t\t\t{{^optgroup}}\n\t\t\t{{#visible}}<option {{#selected}}selected=\'selected\'{{/selected}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}} value="{{i}}">{{{label}}}</option>{{/visible}}\n\t\t\t{{/optgroup}}\n\t\t\t{{#optgroup}}\n\t\t\t{{#visible}}{{#optgroup.label}}\n\t\t\t<optgroup label="{{label}}" data-id="{{optgroup.id}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}">\n\t\t\t{{/optgroup.label}}\n\t\t\t\t\t{{#options}}\n\t\t\t\t\t{{#visible}}<option data-id="{{optgroup.id}}" {{#selected}}selected=\'selected\'{{/selected}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}  value="{{i}}">{{{label}}}</option>{{/visible}}\n\t\t\t\t\t{{/options}}\n\t\t\t\t\t{{#optgroup.label}}\n\t\t\t</optgroup>\n\t\t\t{{/optgroup.label}}{{/visible}}\n\t\t\t{{/optgroup}}\n\t\t\t{{/options}}\n\t\t\t</select>\n\t\t{{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}\n\t\t{{^post}}{{#pre}}</div>{{/pre}}{{/post}}\n\t\t{{>_addons}}\n\t\t{{>_actions}}\n\t</div>\n</div>',radio:'<div class="row clearfix form-group {{modifiers}} {{#array}}isArray" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/array}}" name="{{name}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12 {{#size}}row{{/size}}" {{#size}}style="padding-top: 5px;"{{/size}}>{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8 {{#size}}row{{/size}}" {{#size}}style="padding-top: 5px;"{{/size}}>{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12" {{#size}}style="padding-top: 5px;"{{/size}}>\n\t{{/label}}\n\t{{#limit}}{{#multiple}}<small class="count text-muted" style="display:block;text-align:left">0/{{limit}}</small>{{/multiple}}{{/limit}}\n\n\t\t\t{{#options}}\n\t\t\t\t{{^optgroup}}\n\n\t\t\t\t\t{{#multiple}}\n\t\t\t\t\t<div class="checkbox {{#size}}col-md-{{size}}{{/size}}" {{#size}}style="margin-top: -5px;"{{/size}}>\n\t\t\t\t\t\t<label class="noselect"><input name="{{name}}_{{value}}" type="checkbox" {{#selected}} checked {{/selected}} value="{{i}}"/> {{{label}}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{/multiple}}\n\t\t\t\t\t{{^multiple}}\n\t\t\t\t\t<div class="radio {{#size}}col-md-{{size}}{{/size}}" {{#size}}style="margin-top: -5px;"{{/size}}>\n\t\t\t\t\t\t<label {{^horizontal}}class="radio-inline"{{/horizontal}}><input style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{i}}" type="radio"><span class="noselect" style="font-weight:normal">{{{label}}}{{^label}}&nbsp;{{/label}}</span></label>        \n\t\t\t\t\t</div>\n\t\t\t\t\t{{/multiple}}\n\n\t\t\t\t{{/optgroup}}\n\t\t\t{{#optgroup}}\n\t\t\t{{#optgroup.label}}\n\t\t\t<b class="text-muted" data-id="{{optgroup.id}} {{^editable}}disabled{{/editable}} {{^visible}}hidden{{/visible}}">{{label}}</b>\n\t\t\t{{/optgroup.label}}\n\t\t\t\t\t{{#options}}\n\n\t\t\t\t\t{{#multiple}}\n\t\t\t\t\t<div class="checkbox {{#size}}col-md-{{size}}{{/size}}" {{#size}}style="margin-top: -5px;"{{/size}}>\n\t\t\t\t\t\t<label class="noselect"><input data-id="{{optgroup.id}}" name="{{name}}_{{value}}" type="checkbox" {{#selected}} checked {{/selected}} value="{{i}}"/> {{{label}}}</label>\n\t\t\t\t\t</div>\n\t\t\t\t\t{{/multiple}}\n\t\t\t\t\t{{^multiple}}\n\t\t\t\t\t<div class="radio {{#size}}col-md-{{size}}{{/size}}" {{#size}}style="margin-top: -5px;"{{/size}}>\n\t\t\t\t\t\t<label {{^horizontal}}class="radio-inline"{{/horizontal}}><input data-id="{{optgroup.id}}" style="margin-right: 5px;" name="{{id}}" {{#selected}} checked=selected {{/selected}}  value="{{i}}" type="radio"><span class="noselect" style="font-weight:normal">{{{label}}}{{^label}}&nbsp;{{/label}}</span></label>        \n\t\t\t\t\t</div>\n\t\t\t\t\t{{/multiple}}\n\n\t\t\t\t\t{{/options}}\n\n\t\t\t{{/optgroup}}\n\t\t\t{{/options}}\n\n\n\n\n\n\n\t\t{{>_addons}}\n\t\t{{>_actions}}\n\t</div>\n</div>',custom_radio:'<div class="row clearfix form-group {{modifiers}} {{#multiple.duplicate}}dupable" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/multiple.duplicate}}" name="{{name}}" data-type="{{type}}">\n{{>_label}}\n{{#multiple.duplicate}}\n<div class="duplicate add btn btn-default"><i class="fa fa-plus"></i></div>\n<div class="btn btn-default remove"><i class="fa fa-minus"></i></div>\n{{/multiple.duplicate}}\n{{#label}}\n{{^horizontal}}<div class="col-md-12">{{/horizontal}}\n{{#horizontal}}<div class="col-md-8">{{/horizontal}}\n{{/label}}\n{{^label}}\n<div class="col-md-12">\n{{/label}}\n\t{{#pre}}<div class="input-group"><span class="input-group-addon">{{{pre}}}</span>{{/pre}}\n\t{{^pre}}{{#post}}<div class="input-group">{{/post}}{{/pre}}\n\t\t<div class="custom-group"  name="{{name}}" style="max-height:200px;overflow-y:scroll;">\n\t\t{{#options}}\n\t\t\t<a href="javascript:void(0);" class="{{^selected}} {{defaultClass}}{{/selected}}{{#selected}} {{selectedClass}}{{/selected}}" data-value="{{value}}">\n\t\t\t\t{{{label}}}\n\t\t\t</a>&nbsp;\n\t\t{{/options}}\n\t\t</div>\n\t{{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}\n\t{{^post}}{{#pre}}</div>{{/pre}}{{/post}}\n\t{{>_addons}}\n\t{{>_actions}}\n</div>\n</div>',fieldset_array:'<div><div class="col-xs-12">{{#array}}{{#append.enable}}<button data-ref="{{ref}}" data-parent="{{parent.id}}" class="gform-append btn btn-info btn-xs pull-right">{{{append.label}}}{{^append.label}}<i class="fa fa-plus"></i> Add {{{label}}}{{/append.label}}</button>{{/append.enable}}{{/array}}<legend>{{label}}</legend><div class="list-group gform-template_row"></div></div></div>',_fieldset:'<div class="row"><fieldset data-type="fieldset" style="" name="{{name}}" id="{{id}}" class="{{modifiers}}" >\n{{#array}}\n<div data-name="{{name}}" data-ref="{{ref}}" class="btn-group hidden-print actions">\n\t{{#remove.enable}}\n\t<div data-id="{{id}}" class="btn btn-white gform-minus">{{{remove.label}}}{{^remove.label}}<i data-id="{{id}}"  class="fa fa-minus text-danger"></i>{{/remove.label}}</div>\n\t{{/remove.enable}}\n\t{{#duplicate.enable}}\n\t<div data-id="{{id}}" class="gform-add btn btn-white">{{{duplicate.label}}}{{^duplicate.label}}<i data-id="{{id}}"  class="fa fa-plus text-success"></i>{{/duplicate.label}}</div>\n\t{{/duplicate.enable}}\n</div>\n{{^section}}{{#legend}}<legend>{{{legend}}}</legend>{{/legend}}{{/section}}\n{{/array}}\n{{^section}}{{#label}}<legend>{{{label}}}</legend>{{/label}}{{/section}}\n<div style="position:relative;top:-20px">{{>_addons}}</div>\n</fieldset></div>',_actions:'{{#array}}\n\t<div data-name="{{name}}" data-ref="{{ref}}" data-parent="{{parent.id}}" class="btn-group hidden-print actions pull-right">\n\t{{#remove.enable}}\n\t<div data-id="{{id}}" class="btn btn-white gform-minus">{{{remove.label}}}{{^remove.label}}<i class="fa fa-minus text-danger"></i>{{/remove.label}}</div>\n\t{{/remove.enable}}\n\t{{#duplicate.enable}}\n\t<div data-id="{{id}}" class="gform-add btn btn-white">{{{duplicate.label}}}{{^duplicate.label}}<i class="fa fa-plus text-success"></i>{{/duplicate.label}}</div>\n\t{{/duplicate.enable}}\n\n\t</div>\n\t{{/array}}',_tooltip:'<div id="tooltip" role="tooltip">\n<span class="info-close"></span>\n<div class="tooltip-body"></div>\n<div id="arrow" data-popper-arrow></div>\n</div>',_info:'<div>\n<div class="title">More&nbsp;Information</div>\n<hr>\n  <div>{{info}}</div>\n</div> ',_label:'\n\t{{^hideLabel}}\n    {{#label}}\n\t<label for="{{name}}" {{^horizontal}}style="text-align:left"{{/horizontal}} class="control-label {{^horizontal}}col-xs-12{{/horizontal}}{{#horizontal}}col-md-4{{/horizontal}}">\n  {{{label}}}{{#required}}{{{requiredText}}}{{/required}}{{suffix}}\n</label>{{/label}}\n{{#info}}<b class="gform-info" data-id="{{id}}"></b>{{/info}}\n{{/hideLabel}}\n    ',_addons:'<span class="help-inline"> {{{help}}}</span>\n<span class="font-xs text-danger" style="display:block;"></span>',checkbox:'<div class="row clearfix {{modifiers}} {{#array}}isArray" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/array}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12" style="margin:0 0 5px">{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8" style="margin:0 0 15px">{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12" style="margin: -10px 0 5px;"">\n\t{{/label}}\n\t\t<div class="checkbox">\n\t\t\t<label class="{{alt-display}}" for="{{id}}">\n\t\t\t\t<input name="{{name}}" id="{{id}}" type="checkbox" {{^editable}}disabled{{/editable}} {{#options.1.selected}}checked=checked{{/options.1.selected}}>{{^format.display}}<span class="falseLabel">{{{options.0.label}}}</span><span class="trueLabel">{{{options.1.label}}}</span>{{/format.display}}{{format.display}}&nbsp;\n\t\t\t</label>\n\t\t</div>\n\t{{#post}}<span class="input-group-addon">{{{post}}}</span></div>{{/post}}\n\t\t{{>_addons}}\n\t\t{{>_actions}}\n\t</div>\n</div>',scale:'\n<div class="row clearfix form-group {{modifiers}} {{#multiple.duplicate}}isArray" data-min="{{multiple.min}}" data-max="{{multiple.max}}{{/multiple.duplicate}}" name="{{name}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{>_actions}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12">{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8">{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12">\n\t{{/label}}\n\t\t\t<table class="table table-striped">\n\t\t\t\t<thead>\n\t\t\t\t<tr>\n\t\t\t\t\t{{#format.low}}<th></th>{{/format.low}}\n\t\t\t\t\t{{#options}}\n\t\t\t\t\t<th><label for="{{name}}_{{i}}">{{{label}}}</label></th>\n\t\t\t\t\t{{/options}}\n\t\t\t\t\t{{#format.high}}<th></th>{{/format.high}}\n\t\t\t\t</tr>\n\t\t\t\t</thead>\n\t\t\t\t<tbody>\n\t\t\t\t<tr>\n\t\t\t\t\t{{#format.low}}<td><label style="font-weight: 500;" for="{{name}}_1">{{{format.low}}}</label></td>{{/format.low}}\n\t\t\t\t\t{{#options}}\n\t\t\t\t\t<td>\n\t\t\t\t\t\t<input data-label="{{label}}" id="{{name}}_{{i}}" name="{{id}}" value="{{i}}" {{^editable}}readonly disabled{{/editable}} type="radio" {{#selected}}checked=checked{{/selected}} >\n\t\t\t\t\t</td>\n\t\t\t\t\t{{/options}}\n\t\t\t\t\t{{#format.high}}<td><label style="font-weight: 500;" for="{{name}}_{{options.length}}">{{{format.high}}}</label></td>{{/format.high}}\n\t\t\t\t</tr>\n\t\t</tbody>\n\t\t\t</table>\n\t\t{{>_addons}}\n\t</div>\n</div>',button:'<button class="btn btn-default hidden-print {{modifiers}}" type="button" style="margin:0 15px">{{{label}}}</button>',tab_container:'\n<form id="{{name}}" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform tab-content {{#options.horizontal}} smart-form-horizontal form-horizontal{{/options.horizontal}} {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}>{{^legendTarget}}{{#legend}}<legend>{{{legend}}}</legend>{{/legend}}{{/legendTarget}}    \n\t<ul class="nav nav-tabs" style="margin-bottom:15px">\n\t\t{{#fields}}\n\t\t\t{{#section}}\n\t\t\t<li {{^index}}class="active"{{/index}}>\n\t\t\t\t<a href="#tabs{{id}}" data-toggle="tab">{{{legend}}}</a>\n\t\t\t</li>\n\t\t\t{{/section}}\t\t\n\t\t{{/fields}}\n\t</ul></form>\n\t</form><div class="gform-footer"></div>',tab_fieldset:'{{#section}}<div class="tab-pane {{^index}}active{{/index}} " id="tabs{{id}}">{{/section}}{{>_fieldset}}{{#section}}</div>{{/section}}',modal_container:'<div class="modal fade gform {{modifiers}} {{#options.horizontal}} form-horizontal{{/options.horizontal}}" id="myModal" name="modal_{{name}}" data-update="{{update}}" data-append="{{append}}" {{#focus}}tabindex="-1"{{/focus}} role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">\n\t<div class="modal-dialog">\n\t\t<div class="modal-content">\n\t\t\t<div class="modal-header {{modal.header_class}}">\n\t\t\t\t<button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>\n\t\t\t\t<h4 class="modal-title" id="myModalLabel">{{#icon}}<i class="fa fa-{{icon}}"></i> {{/icon}}{{{title}}}{{{legend}}}&nbsp;</h4>\n\t\t\t</div>\n\t\t\t<div class="modal-body">\n\t\t\t\t{{{body}}}\n\t\t\t\t{{^sections}}\n\t\t\t\t<form id="{{name}}" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform {{#options.horizontal}} smart-form-horizontal form-horizontal{{/options.horizontal}} {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}></form>\n\t\t\t\t{{/sections}}\n\t\t\t\t{{#sections}}\n\t\t\t\t<form id="{{name}}" {{^autocomplete}}autocomplete="false"{{/autocomplete}} name="{{name}}" class="gform tab-content {{#options.horizontal}} smart-form-horizontal form-horizontal{{/options.horizontal}} {{modifiers}}" {{#action}}action="{{action}}"{{/action}} onsubmit="return false;" {{#method}}method="{{method}}"{{/method}}>   \n\t\t\t\t<ul class="nav nav-tabs" style="margin-bottom:15px">\n\t\t\t\t\t{{#fields}}\n\t\t\t\t\t{{#section}}\n\t\t\t\t\t<li {{^index}}class="active"{{/index}}>\n\t\t\t\t\t\t<a href="#tabs{{id}}" data-toggle="tab">{{{legend}}}</a>\n\t\t\t\t\t</li>\n\t\t\t\t\t{{/section}}\t\t\n\t\t\t\t\t{{/fields}}\n\t\t\t\t</ul></form>\n\t\t\t\t{{/sections}}\n\t\t\t\t\n\t\t\t</div>\n\t\t\t<div class="modal-footer gform-footer">\n\t\t\t\t{{{footer}}}\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div>\n',modal_fieldset:"{{>_fieldset}}",child_modal_footer:'<button type="button" class="btn btn-danger hidden-print pull-left gform-minus"><i class="fa fa-times"></i> Delete</button><button class="btn btn-default hidden-print done" style="margin:0 15px"><i class="fa fa-check"></i> Done</button>',template:'<div><div class="col-xs-12">{{#array}}{{#append.enable}}<button data-ref="{{refid}}" class="gform-append btn btn-info btn-xs pull-right">{{{append.label}}}{{^append.label}}<i class="fa fa-plus"></i> Add {{{label}}}{{/append.label}}</button>{{/append.enable}}<legend>{{label}}</legend>{{/array}}</div></div>',template_item:'<div style="position:relative;top: -6px;">{{>_actions}}</div><div class="gform-template_container">{{{format.template}}}{{^format.template}}{{{display}}}{{/format.template}}</div>',table:'<div><div class="col-xs-12" style="overflow:scroll">{{#array}}<legend>{{{label}}}</legend>{{#append.enable}}<button type="button" data-ref="{{refid}}"  class="gform-append btn btn-info btn-xs" style="top: -10px;position: relative;">{{{append.label}}}{{^append.label}}<i class="fa fa-plus"></i> Add {{{label}}}{{/append.label}}</button>{{/append.enable}}{{/array}}<table class="table table-bordered table-striped table-hover table-fixed {{#array.sortable.enable}}sortable{{/array.sortable.enable}}"><thead>{{#labels}}<th>{{{.}}}</th>{{/labels}}</thead></table></div></div>'},gform.columnClasses=_.map(new Array(13),(function(t,e){return"col-xs-12 col-sm-"+e})),gform.offsetClasses=_.map(new Array(13),(function(t,e){return"col-xs-offset-0 col-sm-offset-"+e})),gform.prototype.options.inline=!0,gform.prototype.options.columns=12,gform.prototype.options.suffix="",gform.handleError=function(t){var e=t.el.querySelector(".font-xs.text-danger");t.valid?(t.el.classList.remove("has-error"),e&&(e.innerHTML="")):(t.el.classList.add("has-error"),e&&(e.innerHTML=t.errors))},gform.types.reset=_.defaultsDeep({toString:function(){return""}},gform.types.button,{defaults:{label:'<i class="fa fa-times"></i> Reset',action:"reset",modifiers:"btn btn-default"}}),gform.types.cancel=_.defaultsDeep({toString:function(){return""}},gform.types.button,{defaults:{label:'<i class="fa fa-times"></i> Cancel',action:"cancel",modifiers:"btn btn-danger"}}),gform.types.save=_.defaultsDeep({toString:function(){return""}},gform.types.button,{defaults:{label:'<i class="fa fa-check"></i> Save',action:"save",modifiers:"btn btn-success"}}),gform.types.clear=_.defaultsDeep({toString:function(){return""}},gform.types.button,{defaults:{label:'<i class="fa fa-times"></i> Clear',action:"clear",modifiers:"btn btn-warning"}}),gform.types.color=_.extend({},gform.types.input,{defaults:{pre:'<i style="display: block;width:20px;height:20px;margin: 0 -5px;background-color:{{value}}"></i>',elType:"text",value:"#000000"},toString:function(t,e){return this.value=this.get(),e?this.value:"<dt>"+this.label+'</dt> <dd><div style="white-space:nowrap"><span style="width:20px;height:20px;display: inline-block;top: 5px;position: relative;background:'+this.value+';"></span> '+(this.value||'<span class="text-muted">(empty)</span>')+"</div></dd><hr>"},initialize:function(){this.onchangeEvent=function(t){if(this.value=this.get(),null!=this.el.querySelector(".count")){var e=this.value.length;this.limit>1&&(e+="/"+this.limit),this.el.querySelector(".count").innerHTML=e}gform.types[this.type].setup.call(this),this.owner.trigger("change",this,{input:this.value}),t&&this.owner.trigger("input",this,{input:this.value})}.bind(this),this.el.addEventListener("input",this.onchangeEvent.bind(null,!0)),this.el.querySelector(".input-group-addon i").addEventListener("click",function(){this.focus()}.bind(this)),$(this.el.querySelector('input[name="'+this.name+'"]')).attr("type","text"),this.el.querySelector(".input-group-addon i").style.backgroundColor=this.get(),$(this.el.querySelector('input[name="'+this.name+'"]')).colorpicker({format:"hex",container:$(this.el).find(".input-group")}).on("changeColor",function(t){this.el.querySelector(".input-group-addon i").style.backgroundColor=this.get(),this.parent.trigger("change",this),this.parent.trigger("input",this)}.bind(this)),gform.types[this.type].setLabel.call(this)}}),gform.types.contentEditable=gform.types.summernote=_.extend({},gform.types.input,{render:function(){return gform.render("contenteditable",this).split('value=""').join('value="'+_.escape(this.value)+'"')},set:function(t){this.$el.summernote("code",t)},get:function(){return this.$el.summernote("code")},initialize:function(){this.$el=$(this.el).find(".formcontrol > div"),this.$el.off(),void 0!==this.onchange&&this.$el.on("input",this.onchange),this.$el.summernote({disableDragAndDrop:!0,dialogsInBody:!0,toolbar:this.item.toolbar||[["style",["bold","italic","underline","clear"]],["link",["linkDialogShow","unlink"]],["font",["strikethrough","superscript","subscript"]],["fontsize",["fontsize"]],["color",["color"]],["para",["ul","ol","paragraph"]],["height",["height"]],["view",["fullscreen"]]]}),this.$el.on("summernote.change",function(){this.owner.trigger("change",this),this.owner.trigger("input",this)}.bind(this)),gform.types[this.type].setLabel.call(this)},satisfied:function(t){return this.value=this.get(),void 0!==this.value&&null!==this.value&&""!==this.value&&"<p><br></p>"!==this.value},destroy:function(){this.$el.summernote("destroy"),this.$el&&this.$el.off()}}),$(document).on("focusin",(function(t){$(t.target).closest(".note-editable").length&&t.stopImmediatePropagation()})),$(document).on("click",(function(t){$(t.target).hasClass(".note-editor")&&(t.stopImmediatePropagation(),$(t.target).find(".open").removeClass("open"))})),gform.types.email=_.extend({},gform.types.input,{defaults:{pre:'<i class="fa fa-envelope"></i>',validate:[{type:"valid_email"}]}}),gform.types.url=_.extend({},gform.types.input,{defaults:{pre:'<i class="fa fa-link"></i>',validate:[{type:"valid_url"}]}}),gform.types.tel=_.extend({},gform.types.input,{defaults:{pre:'<i class="fa fa-phone"></i>',placeholder:"+1"}}),gform.types.password=_.extend({},gform.types.input,{defaults:{pre:'<i class="fa fa-lock"></i>'}}),gform.types.address=_.extend({},gform.types.input,gform.types.section,{defaults:{fields:[{type:"text",name:"street",label:"Street Address",validate:[{type:"length",max:"255"}]},{type:"text",name:"line2",label:"Address line 2",validate:[{type:"length",max:"150"}]},{type:"text",name:"city",label:"City",validate:[{type:"length",max:"255"}],columns:6},{type:"text",name:"state",label:"State/Province/Region",validate:[{type:"length",max:"255"}],columns:6},{type:"text",name:"zip",label:"Postal/Zip Code",validate:[{type:"length",max:"15"}],columns:6},{type:"select",name:"country",options:"../data/countries.json",format:{label:"{{name}}",value:"{{code}}"},label:"Country",validate:[{type:"length",max:"15"}],columns:6}]}}),gform.THEME={bootstrap:"0.0.4.2"},gform.types.datetime=_.extend({},gform.types.input,{defaults:{format:{input:"MM/DD/YYYY h:mm A"},elType:"text"},initialize:function(){this.onchangeEvent=function(){this.value=this.get(),this.parent.trigger(["change","input"],this,{input:this.value})}.bind(this);var t=$(this.el.querySelector('input[name="'+this.name+'"]'));t.datetimepicker({format:this.format.input}),t.on("dp.change",this.onchangeEvent.bind(null,!0)),gform.types[this.type].setLabel.call(this)}}),gform.types.date=_.extend({},gform.types.datetime,{defaults:{format:{input:"MM/DD/YYYY"},elType:"text"}}),gform.types.time=_.extend({},gform.types.datetime,{defaults:{format:{input:"h:mm A"},elType:"text"}}),gform.prototype.modalDelay=475,gform.prototype.modal=function(t){var e=this.modalEl||this.el;switch(document.body.contains(e)||(document.body.appendChild(e),e.querySelector(".close").addEventListener("click",function(){(this.owner||this).trigger("close",this)}.bind(this))),t){case"hide":default:$(e).modal(t)}return $(this.el).on("hidden.bs.modal",function(){this.trigger("cancel",this)}.bind(this)),this},document.body.appendChild(gform.create("<style>"+gform.render("_style",{},"all")+"</style>"));
gform.stencils.smallcombo='\n<div class="row clearfix form-group {{modifiers}}" data-type="{{type}}">\n\t{{>_label}}\n\t{{#label}}\n\t{{^horizontal}}<div class="col-md-12">{{/horizontal}}\n\t{{#horizontal}}<div class="col-md-8">{{/horizontal}}\n\t{{/label}}\n\t{{^label}}\n\t<div class="col-md-12">\n\t{{/label}}\n\t<div class="combobox-container">\n\t\t<div class="input-group" style="width:100%" contentEditable="false"> \n\t\t{{#pre}}<span class="input-group-addon">{{{pre}}}</span>{{/pre}}\n        <div style="overflow: hidden;white-space: nowrap;position: absolute;padding-right: 40px;border-radius: 5px;" {{^autocomplete}}autocomplete="off"{{/autocomplete}} class="form-control {{^editable}}readonly disabled{{/editable}}" {{^editable}}readonly disabled{{/editable}} {{#limit}}maxlength="{{limit}}"{{/limit}}{{#min}} min="{{min}}"{{/min}}{{#max}} max="{{max}}"{{/max}} {{#step}} step="{{step}}"{{/step}} placeholder="{{placeholder}}" {{#editable}}contentEditable{{/editable}} type="{{elType}}{{^elType}}{{type}}{{/elType}}" name="{{name}}" id="{{name}}" value="{{value}}" ></div>\n        <ul class="typeahead typeahead-long dropdown-menu"></ul>\n        <span class="input-group-addon dropdown-toggle" style="height: 34px;z-index: 10;position: relative;border-left: solid 1px #ccc;width: 38px;" data-dropdown="dropdown"> <span class="caret" data-dropdown="dropdown"></span> <span data-dropdown="" class="fa fa-times"></span> </span> \n\t\t</div>\n        </div>\n\t\t{{>_addons}}\n\t\t{{>_actions}}\n\t</div>\n</div>',gform.types.smallcombo=_.extend({},gform.types.input,{base:"collection",destroy:function(){this.el.removeEventListener("change",this.onchangeEvent),this.el.removeEventListener("input",this.onchangeEvent),this.combo.removeEventListener("blur",this.handleBlur)},toString:function(t,e){return e?void 0!==this.combo?this.combo.innerText:this.get():void 0!==this.combo?"<dt>"+this.label+"</dt> <dd>"+(this.combo.innerText||"(empty)")+"</dd><hr>":"<dt>"+this.label+"</dt> <dd>"+(this.get()||"(empty)")+"</dd><hr>"},focus:function(){var t=this.el.querySelector("[type="+this.type+"]");if(null!==t){t.focus();var e=window.getSelection(),i=e.focusNode;if(null!==i){var s=document.createRange();s.selectNode(i),s.collapse(!1),e.removeAllRanges(),e.addRange(s)}}},render:function(){return void 0===this.mapOptions&&(this.mapOptions=new gform.mapOptions(this,this.value,0,this.owner.collections),this.mapOptions.on("change",function(){this.options=this.mapOptions.getoptions(),this.shown&&this.renderMenu(),void 0!==this.value&&gform.types[this.type].set.call(this,this.value)}.bind(this))),this.options=this.mapOptions.getoptions(),this.value=this.value||"",gform.render("smallcombo",this)},get:function(){return this.strict?(_.find(this.options,{value:this.value})||{value:""}).value:this.value},set:function(t,e,i){var s=_.find(this.options,{value:t})||_.find(this.options,{label:t});void 0!==s?(i||(this.combo.innerText=s.label,gform.addClass(this.el.querySelector(".combobox-container"),"combobox-selected")),this.value=s.value):(this.value=t||"",(void 0===t||void 0!==t&&this.combo.innerText!==t)&&(this.combo.innerText=this.value||"",this.parent.trigger(["undefined"],this)),gform.toggleClass(this.el.querySelector(".combobox-container"),"combobox-selected",""!==this.value)),gform.types[this.type].setLabel.call(this),e||this.parent.trigger(["change"],this)},edit:function(t){this.editable=t,this.el.querySelector(".form-control").setAttribute("contenteditable",t?"true":"false"),gform.toggleClass(this.el,"disabled",!t)},initialize:function(){this.onchangeEvent=function(t){_.throttle(this.renderMenu,100).call(this),this.set(this.combo.innerText,!1,!0),this.parent.trigger(["input"],this,{input:this.value})}.bind(this),gform.types[this.type].setup.call(this),this.processOptions=function(t){if(t.visible=!("visible"in t)||t.visible,t.editable=!("editable"in t)||t.editable,void 0!==t.optgroup)void 0!==t.optgroup.options&&t.optgroup.options.length&&_.each(t.optgroup.options,this.processOptions.bind(this));else if(!1!==this.filter&&(""==this.combo.innerText||_.score(t.label.toLowerCase(),this.combo.innerText.toLowerCase())>.6)){var e=document.createElement("li");e.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{i}}" class="dropdown-item">{{{display}}}{{^display}}{{{label}}}{{/display}}</a>',t),this.menu.appendChild(e),t.filter=!0}else t.filter=!1},this.renderMenu=function(){this.menu.style.display="none",this.shown=!1,this.menu.innerHTML="",this.options=this.mapOptions.getoptions(),_.each(this.options,this.processOptions.bind(this));var t=this.menu.querySelector("li");if(null!==t&&(gform.addClass(t,"active"),this.menu.style.display="block",this.shown=!0),"string"==typeof this.search)gform.ajax({path:gform.renderString(this.search,{search:this.combo.innerText}),success:function(t){if(index=this.options.length,this.options=this.options.concat(_.map(t,function(t){if(t.i=t.i||++index,void 0!==this.format&&(void 0!==this.format.label&&(t.label=gform.renderString(this.format.label,t)),void 0!==this.format.display&&(t.display=gform.renderString(this.format.display,t)),"string"==typeof this.format.value?t.value=gform.renderString(this.format.value,t):"function"==typeof this.format.value&&(t.value=this.format.value.call(this,t))),t.visible=!("visible"in t)||t.visible,t.editable=!("editable"in t)||t.editable,!this.filter||""==this.combo.innerText||_.score(t.label.toLowerCase(),this.combo.innerText.toLowerCase())>.1){var e=document.createElement("li");e.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{i}}" class="dropdown-item">{{{display}}}{{^display}}{{{label}}}{{/display}}</a>',t),this.menu.appendChild(e),t.filter=!0}return t}.bind(this))),"object"==typeof this.custom){this.menu.style.display="block",this.shown=!0;var e=document.createElement("li");e.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{custom.name}}" class="dropdown-item">{{{custom.display}}}</a>',this),this.menu.appendChild(e)}var i=this.menu.querySelector("li");null!==i?(gform.addClass(i,"active"),this.menu.style.display="block",this.shown=!0):this.value=null,this.parent.trigger(["change"],this,{input:this.value})}.bind(this)});else if("object"==typeof this.custom){this.menu.style.display="block",this.shown=!0;var e=document.createElement("li");e.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{custom.name}}" class="dropdown-item">{{{custom.display}}}</a>',this),this.menu.appendChild(e)}},this.shown=!1,this.input=this.input||!1,this.menu=this.el.querySelector("ul"),this.combo=this.el.querySelector(".form-control"),this.set=gform.types[this.type].set.bind(this),this.select=function(t){if(isNaN(parseInt(t)))"object"==typeof this.custom&&this.custom.name==t&&("function"==typeof this.custom.action&&this.custom.action.call(this),this.parent.trigger(t,this));else{var e=_.find(this.options,{i:parseInt(t)});this.set(e.value),this.parent.trigger(["input"],this,{input:this.value}),this.menu.style.display="none",this.shown=!1,gform.types.smallcombo.focus.call(this)}},$(this.el).on("click",".dropdown-item",function(t){"false"!=t.currentTarget.dataset.editable&&0!=t.currentTarget.dataset.editable&&this.select(t.currentTarget.dataset.index),t.stopPropagation()}.bind(this)),this.el.addEventListener("mouseup",function(t){void 0!==t.target.dataset.dropdown&&this.editable&&(t.stopPropagation(),null!==this.el.querySelector(".combobox-selected")?(this.set(),this.parent.trigger(["input"],this,{input:""}),this.renderMenu()):this.shown?(this.menu.style.display="none",this.shown=!1):this.renderMenu(),gform.types.smallcombo.focus.call(this)),this.mousedropdown=!1}.bind(this)),this.el.addEventListener("mousedown",function(t){void 0!==t.target.dataset.dropdown&&(this.mousedropdown=!0)}.bind(this)),this.el.addEventListener("keydown",function(t){if(!this.shown)return 40==t.keyCode&&this.renderMenu(),void(13==t.keyCode&&t.preventDefault());switch(t.keyCode){case 9:case 13:t.preventDefault(),this.select(this.menu.querySelector("li.active a").dataset.index);break;case 27:t.preventDefault(),this.menu.style.display="none",this.shown=!1;break;case 38:t.preventDefault();var e=this.menu.querySelector(".active");if(gform.removeClass(e,"active"),prev=e.previousElementSibling,!prev){var i=this.menu.querySelectorAll("li");prev=i[i.length-1]}if(gform.addClass(prev,"active"),(e=$(this.menu).find(".active")).length){var s=(o=e.position().top)+e.height(),n=$(this.menu).scrollTop();s>(a=$(this.menu).height())?$(this.menu).scrollTop(n+s-a):o<0&&$(this.menu).scrollTop(n+o)}break;case 40:t.preventDefault();e=this.menu.querySelector(".active");if(gform.removeClass(e,"active"),next=e.nextElementSibling,next||(next=this.menu.querySelector("li")),gform.addClass(next,"active"),(e=$(this.menu.querySelector(".active"))).length){var o,a;s=(o=e.position().top)+e.height(),n=$(this.menu).scrollTop();s>(a=$(this.menu).height())?$(this.menu).scrollTop(n+s-a):o<0&&$(this.menu).scrollTop(n+o)}}t.stopPropagation()}.bind(this)),$(this.menu).on("mouseenter","li",function(t){this.mousedover=!0,null!==this.menu.querySelector(".active")&&gform.removeClass(this.menu.querySelector(".active"),"active"),gform.addClass(t.currentTarget,"active")}.bind(this)),$(this.menu).on("mouseleave","li",function(t){this.mousedover=!1}.bind(this)),this.handleBlur=function(t){var e=document.createElement("input");if(e.value=this.combo.innerText,this.combo.innerHTML=e.value,!(gform.hasClass(t.relatedTarget,"dropdown-item")||gform.hasClass(t.relatedTarget,"dropdown-toggle")||this.mousedropdown)){if(this.shown){var i=_.filter(this.options,{filter:!0});this.strict?1==i.length?this.set(i[0].value):(i=_.filter(this.options,{label:this.combo.innerText})).length&&this.set(i[0].value):this.set(this.combo.innerText),!this.mousedover&&this.shown&&setTimeout(function(){this.menu.style.display="none",this.shown=!1}.bind(this),200),this.parent.trigger(["input"],this,{input:this.value}),this.menu.style.display="none",this.shown=!1}this.strict?(this.set(this.value||this.combo.innerText),this.set(gform.types[this.type].get.call(this))):void 0!==_.find(this.options,{value:this.value})?this.set(this.value):this.parent.trigger(["undefined"],this)}}.bind(this),this.combo.addEventListener("blur",this.handleBlur),this.options=this.mapOptions.getoptions(),"string"==typeof this.search?gform.ajax({path:gform.renderString(this.search,{value:this.value}),success:function(t){index=this.options.length,this.options=this.options.concat(_.map(t,function(t){if(t.index=(t.index||++index)+"",void 0!==this.format&&(void 0!==this.format.label&&(t.label=gform.renderString(this.format.label,t)),void 0!==this.format.display&&(t.display=gform.renderString(this.format.display,t)),"string"==typeof this.format.value?t.value=gform.renderString(this.format.value,t):"function"==typeof this.format.value&&(t.value=this.format.value.call(this,t))),t.visible=!("visible"in t)||t.visible,t.editable=!("editable"in t)||t.editable,""==this.combo.innerText||_.score(t.label.toLowerCase(),this.combo.innerText.toLowerCase())>.1){var e=document.createElement("li");e.innerHTML=gform.renderString('<a {{^editable}}style="color:#ccc;"{{/editable}} href="javascript:void(0);" tabindex="0" data-editable={{editable}} data-index="{{i}}" class="dropdown-item">{{{display}}}{{^display}}{{{label}}}{{/display}}</a>',t),this.menu.appendChild(e)}return t}.bind(this))),void 0!==this.value&&this.set(this.value)}.bind(this)}):void 0!==this.value&&this.set(this.value),this.el.addEventListener("input",this.onchangeEvent.bind(null,!0))}});
